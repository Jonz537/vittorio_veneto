/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/GroupManager.js":
/*!*****************************!*\
  !*** ./src/GroupManager.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createGroup: () => (/* binding */ createGroup),\n/* harmony export */   joinGroup: () => (/* binding */ joinGroup)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utils */ \"./src/Utils.js\");\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/storage'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index */ \"./src/index.js\");\n\r\n\r\n\r\n\r\n\r\nfunction joinGroup(database, userId, storage){\r\n    const group_to_enter = $(\"#group_to_enter\").val();\r\n    const group_password = $(\"#group_password\").val();\r\n\r\n    if(group_to_enter != null && group_password != null){\r\n        Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(database, \"chat/messages/\" + group_to_enter + \"/psw\"),(snapshot) => {\r\n\r\n            let passwordGiusta = snapshot.val();\r\n\r\n            let queryAlreadyInGroup = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(database, \"chat/users/\" + userId + \"/chats\"), Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(\"chatname\"), Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(group_to_enter));\r\n\r\n            Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(queryAlreadyInGroup, (snapshot) => {\r\n\r\n                if(!snapshot.exists()){\r\n                    if(group_password === passwordGiusta){\r\n                        const join_group_ref = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(database, 'chat/users/' + userId + '/chats');\r\n                        const new_join_group_ref = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(join_group_ref);\r\n\r\n                        Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(new_join_group_ref, {\r\n                            chatname: group_to_enter\r\n                        });\r\n\r\n                        (0,_index__WEBPACK_IMPORTED_MODULE_2__.loadChatPage)()\r\n                            .then(() => (0,_index__WEBPACK_IMPORTED_MODULE_2__.initializeChatView)(database, userId, Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/storage'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()), storage));\r\n\r\n                    }else{\r\n                        (0,_Utils__WEBPACK_IMPORTED_MODULE_1__.warning)(\"Credenziali errate\");\r\n                    }\r\n                }else{\r\n                    (0,_Utils__WEBPACK_IMPORTED_MODULE_1__.warning)(\"Sei gia in questo gruppo\");\r\n                }\r\n            }, {\r\n                onlyOnce:true\r\n            });\r\n        }, {\r\n            onlyOnce:true\r\n        });\r\n    }else{\r\n        (0,_Utils__WEBPACK_IMPORTED_MODULE_1__.warning)(\"Compila tutti i campi\");\r\n    }\r\n}\r\n\r\nfunction createGroup(database, storage, userId){\r\n    const group_to_create = $(\"#group_to_create\").val();\r\n    const group_create_password = $(\"#group_create_password\").val();\r\n\r\n    const file = document.getElementById('group_create_image').files[0];\r\n\r\n    const postListRefe = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(database, 'chat');\r\n    const newPostRefe = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(postListRefe);\r\n\r\n    const fileRef = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/storage'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(storage, 'images/' + newPostRefe.key + \".\" + file.type.substring(6, 10));\r\n\r\n    Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/storage'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(fileRef, file).then(() => {\r\n\r\n        Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(database, \"chat/messages/\" + group_to_create), {\r\n            img: newPostRefe.key + \".\" + file.type.substring(6, 10),\r\n            psw: group_create_password\r\n        }).catch();\r\n\r\n        const joinGroupRef = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(database, 'chat/users/' + userId + '/chats');\r\n        const newJoinGroupRef = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(joinGroupRef);\r\n\r\n        Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(newJoinGroupRef, {\r\n            chatname: group_to_create\r\n        });\r\n\r\n        (0,_index__WEBPACK_IMPORTED_MODULE_2__.loadChatPage)()\r\n            .then(() => (0,_index__WEBPACK_IMPORTED_MODULE_2__.initializeChatView)(database, userId, Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/storage'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()), storage));\r\n    });\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvR3JvdXBNYW5hZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF3RjtBQUN4RDtBQUNnQztBQUNQO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZ0pBQU8sQ0FBQyxnSkFBRztBQUNuQjtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsZ0pBQUssQ0FBQyxnSkFBRywrQ0FBK0MsZ0pBQVksY0FBYyxnSkFBTztBQUMvSDtBQUNBLFlBQVksZ0pBQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGdKQUFHO0FBQ2xELG1EQUFtRCxnSkFBSTtBQUN2RDtBQUNBLHdCQUF3QixnSkFBRztBQUMzQjtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLHdCQUF3QixvREFBWTtBQUNwQyx3Q0FBd0MsMERBQWtCLG1CQUFtQiwrSUFBVTtBQUN2RjtBQUNBLHFCQUFxQjtBQUNyQix3QkFBd0IsK0NBQU87QUFDL0I7QUFDQSxpQkFBaUI7QUFDakIsb0JBQW9CLCtDQUFPO0FBQzNCO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0wsUUFBUSwrQ0FBTztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixnSkFBRztBQUM1Qix3QkFBd0IsZ0pBQUk7QUFDNUI7QUFDQSxvQkFBb0IsK0lBQVU7QUFDOUI7QUFDQSxJQUFJLCtJQUFXO0FBQ2Y7QUFDQSxRQUFRLGdKQUFHLENBQUMsZ0pBQUc7QUFDZjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsNkJBQTZCLGdKQUFHO0FBQ2hDLGdDQUFnQyxnSkFBSTtBQUNwQztBQUNBLFFBQVEsZ0pBQUc7QUFDWDtBQUNBLFNBQVM7QUFDVDtBQUNBLFFBQVEsb0RBQVk7QUFDcEIsd0JBQXdCLDBEQUFrQixtQkFBbUIsK0lBQVU7QUFDdkUsS0FBSztBQUNMO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbmRleC8uL3NyYy9Hcm91cE1hbmFnZXIuanM/ZTRjNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2VxdWFsVG8sIG9uVmFsdWUsIG9yZGVyQnlDaGlsZCwgcHVzaCwgcXVlcnksIHJlZiwgc2V0fSBmcm9tIFwiZmlyZWJhc2UvZGF0YWJhc2VcIjtcclxuaW1wb3J0IHt3YXJuaW5nfSBmcm9tIFwiLi9VdGlsc1wiO1xyXG5pbXBvcnQge3JlZiBhcyBzdG9yYWdlUmVmLCB1cGxvYWRCeXRlc30gZnJvbSBcImZpcmViYXNlL3N0b3JhZ2VcIjtcclxuaW1wb3J0IHtsb2FkQ2hhdFBhZ2UsIGluaXRpYWxpemVDaGF0Vmlld30gZnJvbSBcIi4vaW5kZXhcIjtcclxuXHJcbmZ1bmN0aW9uIGpvaW5Hcm91cChkYXRhYmFzZSwgdXNlcklkLCBzdG9yYWdlKXtcclxuICAgIGNvbnN0IGdyb3VwX3RvX2VudGVyID0gJChcIiNncm91cF90b19lbnRlclwiKS52YWwoKTtcclxuICAgIGNvbnN0IGdyb3VwX3Bhc3N3b3JkID0gJChcIiNncm91cF9wYXNzd29yZFwiKS52YWwoKTtcclxuXHJcbiAgICBpZihncm91cF90b19lbnRlciAhPSBudWxsICYmIGdyb3VwX3Bhc3N3b3JkICE9IG51bGwpe1xyXG4gICAgICAgIG9uVmFsdWUocmVmKGRhdGFiYXNlLCBcImNoYXQvbWVzc2FnZXMvXCIgKyBncm91cF90b19lbnRlciArIFwiL3Bzd1wiKSwoc25hcHNob3QpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGxldCBwYXNzd29yZEdpdXN0YSA9IHNuYXBzaG90LnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHF1ZXJ5QWxyZWFkeUluR3JvdXAgPSBxdWVyeShyZWYoZGF0YWJhc2UsIFwiY2hhdC91c2Vycy9cIiArIHVzZXJJZCArIFwiL2NoYXRzXCIpLCBvcmRlckJ5Q2hpbGQoXCJjaGF0bmFtZVwiKSwgZXF1YWxUbyhncm91cF90b19lbnRlcikpO1xyXG5cclxuICAgICAgICAgICAgb25WYWx1ZShxdWVyeUFscmVhZHlJbkdyb3VwLCAoc25hcHNob3QpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZighc25hcHNob3QuZXhpc3RzKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGdyb3VwX3Bhc3N3b3JkID09PSBwYXNzd29yZEdpdXN0YSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpvaW5fZ3JvdXBfcmVmID0gcmVmKGRhdGFiYXNlLCAnY2hhdC91c2Vycy8nICsgdXNlcklkICsgJy9jaGF0cycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdfam9pbl9ncm91cF9yZWYgPSBwdXNoKGpvaW5fZ3JvdXBfcmVmKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldChuZXdfam9pbl9ncm91cF9yZWYsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXRuYW1lOiBncm91cF90b19lbnRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRDaGF0UGFnZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiBpbml0aWFsaXplQ2hhdFZpZXcoZGF0YWJhc2UsIHVzZXJJZCwgc3RvcmFnZVJlZiwgc3RvcmFnZSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybmluZyhcIkNyZWRlbnppYWxpIGVycmF0ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuaW5nKFwiU2VpIGdpYSBpbiBxdWVzdG8gZ3J1cHBvXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICBvbmx5T25jZTp0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgICAgb25seU9uY2U6dHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgd2FybmluZyhcIkNvbXBpbGEgdHV0dGkgaSBjYW1waVwiKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlR3JvdXAoZGF0YWJhc2UsIHN0b3JhZ2UsIHVzZXJJZCl7XHJcbiAgICBjb25zdCBncm91cF90b19jcmVhdGUgPSAkKFwiI2dyb3VwX3RvX2NyZWF0ZVwiKS52YWwoKTtcclxuICAgIGNvbnN0IGdyb3VwX2NyZWF0ZV9wYXNzd29yZCA9ICQoXCIjZ3JvdXBfY3JlYXRlX3Bhc3N3b3JkXCIpLnZhbCgpO1xyXG5cclxuICAgIGNvbnN0IGZpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JvdXBfY3JlYXRlX2ltYWdlJykuZmlsZXNbMF07XHJcblxyXG4gICAgY29uc3QgcG9zdExpc3RSZWZlID0gcmVmKGRhdGFiYXNlLCAnY2hhdCcpO1xyXG4gICAgY29uc3QgbmV3UG9zdFJlZmUgPSBwdXNoKHBvc3RMaXN0UmVmZSk7XHJcblxyXG4gICAgY29uc3QgZmlsZVJlZiA9IHN0b3JhZ2VSZWYoc3RvcmFnZSwgJ2ltYWdlcy8nICsgbmV3UG9zdFJlZmUua2V5ICsgXCIuXCIgKyBmaWxlLnR5cGUuc3Vic3RyaW5nKDYsIDEwKSk7XHJcblxyXG4gICAgdXBsb2FkQnl0ZXMoZmlsZVJlZiwgZmlsZSkudGhlbigoKSA9PiB7XHJcblxyXG4gICAgICAgIHNldChyZWYoZGF0YWJhc2UsIFwiY2hhdC9tZXNzYWdlcy9cIiArIGdyb3VwX3RvX2NyZWF0ZSksIHtcclxuICAgICAgICAgICAgaW1nOiBuZXdQb3N0UmVmZS5rZXkgKyBcIi5cIiArIGZpbGUudHlwZS5zdWJzdHJpbmcoNiwgMTApLFxyXG4gICAgICAgICAgICBwc3c6IGdyb3VwX2NyZWF0ZV9wYXNzd29yZFxyXG4gICAgICAgIH0pLmNhdGNoKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGpvaW5Hcm91cFJlZiA9IHJlZihkYXRhYmFzZSwgJ2NoYXQvdXNlcnMvJyArIHVzZXJJZCArICcvY2hhdHMnKTtcclxuICAgICAgICBjb25zdCBuZXdKb2luR3JvdXBSZWYgPSBwdXNoKGpvaW5Hcm91cFJlZik7XHJcblxyXG4gICAgICAgIHNldChuZXdKb2luR3JvdXBSZWYsIHtcclxuICAgICAgICAgICAgY2hhdG5hbWU6IGdyb3VwX3RvX2NyZWF0ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsb2FkQ2hhdFBhZ2UoKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiBpbml0aWFsaXplQ2hhdFZpZXcoZGF0YWJhc2UsIHVzZXJJZCwgc3RvcmFnZVJlZiwgc3RvcmFnZSkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7am9pbkdyb3VwLCBjcmVhdGVHcm91cH0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/GroupManager.js\n");

/***/ }),

/***/ "./src/LoadChat.js":
/*!*************************!*\
  !*** ./src/LoadChat.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addChatButton: () => (/* binding */ addChatButton)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/storage'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _chatManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chatManager */ \"./src/chatManager.js\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index */ \"./src/index.js\");\n/* harmony import */ var _VoiceManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./VoiceManager */ \"./src/VoiceManager.js\");\n/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Utils */ \"./src/Utils.js\");\n/* harmony import */ var _admin__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./admin */ \"./src/admin.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nasync function addChatButton(chat, property, database, storage, userId) {\r\n    const chatId = chat.chatname.replace(/\\s/g, \"_\");\r\n\r\n    $(\"#chat_lists\").append(`\r\n    <div value=\"${property}\" id=\"${chatId}\" class=\"sidebarChats\">\r\n      <div class=\"sidebarChatsName\">${chat.chatname}</div>\r\n      <div class=\"sidebarChatsLastMessage\">\r\n        <div class=\"sidebarChatsLastMessageText margin-right-1\" id=\"lasto-${chat.chatname}\"></div>\r\n        <div class=\"sidebarChatsLastMessageHour\" id=\"orao-${chat.chatname}\"></div>\r\n      </div>\r\n    </div>\r\n  `);\r\n\r\n    document.getElementById(chatId).addEventListener('click', () => {\r\n        (0,_index__WEBPACK_IMPORTED_MODULE_2__.set_chat_world)(chatId);\r\n        let chat_world_id = property;\r\n        $(\"#chat_name_title\").text(chat.chatname);\r\n        handleChatClick(chatId, chat_world_id, database, storage, userId)\r\n    });\r\n\r\n    const lastMessageQuery = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(database, `chat/messages/${chat.chatname}/messages`), Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(), Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(1));\r\n\r\n    await Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(lastMessageQuery, (snapshot) => {\r\n        snapshot.forEach(childSnapshot => {\r\n            const msg = childSnapshot.val();\r\n            $(`#lasto-${chat.chatname}`).text(msg.text.substring(0, 12));\r\n            $(`#orao-${chat.chatname}`).text(msg.date);\r\n        });\r\n    });\r\n}\r\n\r\nasync function handleChatClick(chatWorld, chatWorldId, database, storage, userId) {\r\n    $(\"#chat_name_title\").html(chatWorld);\r\n\r\n    const imageRef = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(database, 'chat/messages/' + chatWorld);\r\n    const snapshotImg = await Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(imageRef);\r\n\r\n    const imagePath = snapshotImg.val()?.img;\r\n\r\n    if (imagePath) {\r\n        const imageUrl = await Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/storage'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/storage'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(storage, 'gs://trentochat.appspot.com/images/' + imagePath));\r\n        $(\"#chat_picture\").prop(\"src\", imageUrl);\r\n    } else {\r\n        console.error(\"Image path not found in the database.\");\r\n    }\r\n\r\n    document.getElementById(\"delete_chat\").addEventListener(\"click\", () => (0,_chatManager__WEBPACK_IMPORTED_MODULE_1__.deleteChat)(database, chatWorld));\r\n    document.getElementById(\"exit_chat\").addEventListener(\"click\", () => (0,_chatManager__WEBPACK_IMPORTED_MODULE_1__.exitChat)(database, chatWorld, chatWorldId, userId));\r\n\r\n    const messagesRef = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(database, 'chat/messages/' + chatWorld + '/messages');\r\n    const userList = {};\r\n    let loadedMessageIds = new Set();\r\n\r\n    // Initial load\r\n    try {\r\n        const snapshot = await Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(messagesRef);\r\n        const messages = snapshot.val();\r\n        if (!messages) return;\r\n\r\n        $(\"#messages_in_chat\").html(\"\");\r\n\r\n        for (const messageId in messages) {\r\n            if (!messages.hasOwnProperty(messageId)) continue;\r\n            loadedMessageIds.add(messageId);\r\n\r\n            const message = messages[messageId];\r\n\r\n            await addText(message, userId, messageId, userList, database, storage);\r\n        }\r\n        document.getElementById(\"messages_in_chat\").scrollTo(0, document.getElementById(\"messages_in_chat\").scrollHeight);\r\n    } catch (error) {\r\n        console.error(\"Error loading messages:\", error);\r\n    }\r\n\r\n    // Add listener for new messages\r\n    Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(messagesRef, async (snapshot) => {\r\n        const messageId = snapshot.key;\r\n        const message = snapshot.val();\r\n\r\n        if (loadedMessageIds.has(messageId)) return;\r\n        loadedMessageIds.add(messageId);\r\n\r\n        await addText(message, userId, messageId, userList, database, storage);\r\n\r\n        document.getElementById(\"messages_in_chat\").scrollTo(0, document.getElementById(\"messages_in_chat\").scrollHeight);\r\n    });\r\n\r\n}\r\n\r\nasync function addText(message, userId, messageId, userList, database, storage) {\r\n    const isSender = message.sender === userId;\r\n\r\n    if (message.type === \"text\") {\r\n        await handleTextMessage(message, messageId, isSender, userList, database);\r\n    // } else if (message.type === \"image\") {\r\n    //     await handleMediaMessage(message, messageId, storage, \"images\", isSender);\r\n    } else if (message.type === \"audio\") {\r\n        await handleMediaMessage(message, messageId, storage, \"audios\", isSender);\r\n    }\r\n}\r\n\r\nasync function handleTextMessage(message, messageId, isSender, userList, database) {\r\n    if (isSender) {\r\n        $(\"#messages_in_chat\").append(`<div id='${messageId}' class='messageDiv'><span class='message_send'>${message.text}</span><br><span class='message_send_data'>${message.date}</span></div>`);\r\n    } else {\r\n        if (!userList[message.sender]) {\r\n            const userSnap = await Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(database, \"chat/users/\" + message.sender));\r\n            userList[message.sender] = userSnap.exists() ? userSnap.val().name : \"dead_user\";\r\n        }\r\n        $(\"#messages_in_chat\").append(`<div class='messageDiv' id='${messageId}'><span class='message_rec_data'>${userList[message.sender]}</span><br><span class='message_rec'>${message.text}</span><br><span class='message_rec_data'>${message.date}</span></div>`);\r\n        if ((0,_index__WEBPACK_IMPORTED_MODULE_2__.getUserRole)() === \"moderator\") {\r\n            addBanningOption(messageId, message.sender);\r\n        }\r\n    }\r\n}\r\n\r\nfunction addBanningOption(messageId, senderId) {\r\n    document.getElementById(messageId).addEventListener(\"click\", () => {\r\n        (0,_Utils__WEBPACK_IMPORTED_MODULE_4__.requestFoot)(\"Confermi?\",\r\n            `Vuoi davvero bannare questo utente (userId: ${senderId})?`,\r\n            \"<button type='button' class='btn btn-danger chiudi' data-bs-dismiss='modal'>Cancel</button><button class='btn btn-success' id='forgot_conf' data-bs-dismiss='modal'>Confirm</button> \");\r\n        $(\"#confirm_modal\").off(\"click\").on(\"click\",() => {\r\n            (0,_admin__WEBPACK_IMPORTED_MODULE_5__.banUser)(senderId);\r\n        });\r\n    })\r\n}\r\n\r\n// async function handleMediaMessage(message, messageId, storage, folder, isSender) {\r\n//     try {\r\n//         const url = await getDownloadURL(storageRef(storage, `gs://trentochat.appspot.com/${folder}/` + message.text));\r\n//         const mediaHtml = folder === \"audios\"\r\n//             ? `<audio controls id='${messageId}' class='' src='${url}'></audio>`\r\n//             : `<img id='${messageId}' class='image_chat' src='${url}' alt=\"\">`;\r\n//         const className = isSender ? 'message_send_data' : 'message_rec_data';\r\n//         $(\"#messages_in_chat\").append(`<p class='${isSender ? \"text-end\" : \"\"}'><span class=''>${mediaHtml}</span><br><span class='rounded ${className} p-1'>${message.date}</span></p>`);\r\n//\r\n//         if (folder === \"images\") {\r\n//             document.getElementById(messageId).onclick = function () {\r\n//                 let modal = document.getElementById(\"myModal\");\r\n//                 let modalImg = document.getElementById(\"img01\");\r\n//                 modalImg.src = $(this).attr('src');\r\n//                 modal.style.display = \"block\";\r\n//             };\r\n//         }\r\n//     } catch (error) {\r\n//         console.log(\"Media download error: \", error);\r\n//     }\r\n// }\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvTG9hZENoYXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBa0c7QUFDN0I7QUFDWjtBQUNMO0FBQ1Y7QUFDTjtBQUNKO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsU0FBUyxRQUFRLE9BQU87QUFDMUMsc0NBQXNDLGNBQWM7QUFDcEQ7QUFDQSw0RUFBNEUsY0FBYztBQUMxRiw0REFBNEQsY0FBYztBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBYztBQUN0QjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSw2QkFBNkIsZ0pBQUssQ0FBQyxnSkFBRyw0QkFBNEIsY0FBYyxhQUFhLGdKQUFVLElBQUksZ0pBQVc7QUFDdEg7QUFDQSxVQUFVLGdKQUFPO0FBQ2pCO0FBQ0E7QUFDQSx3QkFBd0IsY0FBYztBQUN0Qyx1QkFBdUIsY0FBYztBQUNyQyxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsZ0pBQUc7QUFDeEIsOEJBQThCLGdKQUFHO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLCtJQUFjLENBQUMsK0lBQVU7QUFDeEQ7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLHdEQUFVO0FBQ3JGLHlFQUF5RSxzREFBUTtBQUNqRjtBQUNBLHdCQUF3QixnSkFBRztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGdKQUFHO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGdKQUFZO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxVQUFVLGtEQUFrRCxhQUFhLDZDQUE2QyxhQUFhO0FBQ3JMLE1BQU07QUFDTjtBQUNBLG1DQUFtQyxnSkFBRyxDQUFDLGdKQUFHO0FBQzFDO0FBQ0E7QUFDQSxxRUFBcUUsVUFBVSxtQ0FBbUMseUJBQXlCLHVDQUF1QyxhQUFhLDRDQUE0QyxhQUFhO0FBQ3hQLFlBQVksbURBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLG1EQUFXO0FBQ25CLDJEQUEyRCxTQUFTO0FBQ3BFO0FBQ0E7QUFDQSxZQUFZLCtDQUFPO0FBQ25CLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRkFBK0YsT0FBTztBQUN0RztBQUNBLHdDQUF3QyxVQUFVLGtCQUFrQixJQUFJO0FBQ3hFLDZCQUE2QixVQUFVLDRCQUE0QixJQUFJO0FBQ3ZFO0FBQ0Esc0RBQXNELDJCQUEyQixtQkFBbUIsVUFBVSxrQ0FBa0MsV0FBVyxPQUFPLGFBQWE7QUFDL0s7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5kZXgvLi9zcmMvTG9hZENoYXQuanM/ZjMzYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2dldCwgb25WYWx1ZSwgcmVmLCBxdWVyeSwgbGltaXRUb0xhc3QsIG9uQ2hpbGRBZGRlZCwgb3JkZXJCeUtleX0gZnJvbSBcImZpcmViYXNlL2RhdGFiYXNlXCI7XHJcbmltcG9ydCB7IGdldERvd25sb2FkVVJMLCByZWYgYXMgc3RvcmFnZVJlZiB9IGZyb20gXCJmaXJlYmFzZS9zdG9yYWdlXCI7XHJcbmltcG9ydCB7ZGVsZXRlQ2hhdCwgZXhpdENoYXQsIHNlbmR9IGZyb20gXCIuL2NoYXRNYW5hZ2VyXCI7XHJcbmltcG9ydCB7Z2V0VXNlclJvbGUsIHNldF9jaGF0X3dvcmxkfSBmcm9tIFwiLi9pbmRleFwiO1xyXG5pbXBvcnQge3N0YXJ0Vm9pY2V9IGZyb20gXCIuL1ZvaWNlTWFuYWdlclwiO1xyXG5pbXBvcnQge3JlcXVlc3RGb290fSBmcm9tIFwiLi9VdGlsc1wiO1xyXG5pbXBvcnQge2JhblVzZXJ9IGZyb20gXCIuL2FkbWluXCI7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBhZGRDaGF0QnV0dG9uKGNoYXQsIHByb3BlcnR5LCBkYXRhYmFzZSwgc3RvcmFnZSwgdXNlcklkKSB7XHJcbiAgICBjb25zdCBjaGF0SWQgPSBjaGF0LmNoYXRuYW1lLnJlcGxhY2UoL1xccy9nLCBcIl9cIik7XHJcblxyXG4gICAgJChcIiNjaGF0X2xpc3RzXCIpLmFwcGVuZChgXHJcbiAgICA8ZGl2IHZhbHVlPVwiJHtwcm9wZXJ0eX1cIiBpZD1cIiR7Y2hhdElkfVwiIGNsYXNzPVwic2lkZWJhckNoYXRzXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJzaWRlYmFyQ2hhdHNOYW1lXCI+JHtjaGF0LmNoYXRuYW1lfTwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwic2lkZWJhckNoYXRzTGFzdE1lc3NhZ2VcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwic2lkZWJhckNoYXRzTGFzdE1lc3NhZ2VUZXh0IG1hcmdpbi1yaWdodC0xXCIgaWQ9XCJsYXN0by0ke2NoYXQuY2hhdG5hbWV9XCI+PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInNpZGViYXJDaGF0c0xhc3RNZXNzYWdlSG91clwiIGlkPVwib3Jhby0ke2NoYXQuY2hhdG5hbWV9XCI+PC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgYCk7XHJcblxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2hhdElkKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBzZXRfY2hhdF93b3JsZChjaGF0SWQpO1xyXG4gICAgICAgIGxldCBjaGF0X3dvcmxkX2lkID0gcHJvcGVydHk7XHJcbiAgICAgICAgJChcIiNjaGF0X25hbWVfdGl0bGVcIikudGV4dChjaGF0LmNoYXRuYW1lKTtcclxuICAgICAgICBoYW5kbGVDaGF0Q2xpY2soY2hhdElkLCBjaGF0X3dvcmxkX2lkLCBkYXRhYmFzZSwgc3RvcmFnZSwgdXNlcklkKVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgbGFzdE1lc3NhZ2VRdWVyeSA9IHF1ZXJ5KHJlZihkYXRhYmFzZSwgYGNoYXQvbWVzc2FnZXMvJHtjaGF0LmNoYXRuYW1lfS9tZXNzYWdlc2ApLCBvcmRlckJ5S2V5KCksIGxpbWl0VG9MYXN0KDEpKTtcclxuXHJcbiAgICBhd2FpdCBvblZhbHVlKGxhc3RNZXNzYWdlUXVlcnksIChzbmFwc2hvdCkgPT4ge1xyXG4gICAgICAgIHNuYXBzaG90LmZvckVhY2goY2hpbGRTbmFwc2hvdCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9IGNoaWxkU25hcHNob3QudmFsKCk7XHJcbiAgICAgICAgICAgICQoYCNsYXN0by0ke2NoYXQuY2hhdG5hbWV9YCkudGV4dChtc2cudGV4dC5zdWJzdHJpbmcoMCwgMTIpKTtcclxuICAgICAgICAgICAgJChgI29yYW8tJHtjaGF0LmNoYXRuYW1lfWApLnRleHQobXNnLmRhdGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUNoYXRDbGljayhjaGF0V29ybGQsIGNoYXRXb3JsZElkLCBkYXRhYmFzZSwgc3RvcmFnZSwgdXNlcklkKSB7XHJcbiAgICAkKFwiI2NoYXRfbmFtZV90aXRsZVwiKS5odG1sKGNoYXRXb3JsZCk7XHJcblxyXG4gICAgY29uc3QgaW1hZ2VSZWYgPSByZWYoZGF0YWJhc2UsICdjaGF0L21lc3NhZ2VzLycgKyBjaGF0V29ybGQpO1xyXG4gICAgY29uc3Qgc25hcHNob3RJbWcgPSBhd2FpdCBnZXQoaW1hZ2VSZWYpO1xyXG5cclxuICAgIGNvbnN0IGltYWdlUGF0aCA9IHNuYXBzaG90SW1nLnZhbCgpPy5pbWc7XHJcblxyXG4gICAgaWYgKGltYWdlUGF0aCkge1xyXG4gICAgICAgIGNvbnN0IGltYWdlVXJsID0gYXdhaXQgZ2V0RG93bmxvYWRVUkwoc3RvcmFnZVJlZihzdG9yYWdlLCAnZ3M6Ly90cmVudG9jaGF0LmFwcHNwb3QuY29tL2ltYWdlcy8nICsgaW1hZ2VQYXRoKSk7XHJcbiAgICAgICAgJChcIiNjaGF0X3BpY3R1cmVcIikucHJvcChcInNyY1wiLCBpbWFnZVVybCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJJbWFnZSBwYXRoIG5vdCBmb3VuZCBpbiB0aGUgZGF0YWJhc2UuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVsZXRlX2NoYXRcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGRlbGV0ZUNoYXQoZGF0YWJhc2UsIGNoYXRXb3JsZCkpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJleGl0X2NoYXRcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGV4aXRDaGF0KGRhdGFiYXNlLCBjaGF0V29ybGQsIGNoYXRXb3JsZElkLCB1c2VySWQpKTtcclxuXHJcbiAgICBjb25zdCBtZXNzYWdlc1JlZiA9IHJlZihkYXRhYmFzZSwgJ2NoYXQvbWVzc2FnZXMvJyArIGNoYXRXb3JsZCArICcvbWVzc2FnZXMnKTtcclxuICAgIGNvbnN0IHVzZXJMaXN0ID0ge307XHJcbiAgICBsZXQgbG9hZGVkTWVzc2FnZUlkcyA9IG5ldyBTZXQoKTtcclxuXHJcbiAgICAvLyBJbml0aWFsIGxvYWRcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXQobWVzc2FnZXNSZWYpO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gc25hcHNob3QudmFsKCk7XHJcbiAgICAgICAgaWYgKCFtZXNzYWdlcykgcmV0dXJuO1xyXG5cclxuICAgICAgICAkKFwiI21lc3NhZ2VzX2luX2NoYXRcIikuaHRtbChcIlwiKTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBtZXNzYWdlSWQgaW4gbWVzc2FnZXMpIHtcclxuICAgICAgICAgICAgaWYgKCFtZXNzYWdlcy5oYXNPd25Qcm9wZXJ0eShtZXNzYWdlSWQpKSBjb250aW51ZTtcclxuICAgICAgICAgICAgbG9hZGVkTWVzc2FnZUlkcy5hZGQobWVzc2FnZUlkKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBtZXNzYWdlc1ttZXNzYWdlSWRdO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgYWRkVGV4dChtZXNzYWdlLCB1c2VySWQsIG1lc3NhZ2VJZCwgdXNlckxpc3QsIGRhdGFiYXNlLCBzdG9yYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZXNzYWdlc19pbl9jaGF0XCIpLnNjcm9sbFRvKDAsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVzc2FnZXNfaW5fY2hhdFwiKS5zY3JvbGxIZWlnaHQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9hZGluZyBtZXNzYWdlczpcIiwgZXJyb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZCBsaXN0ZW5lciBmb3IgbmV3IG1lc3NhZ2VzXHJcbiAgICBvbkNoaWxkQWRkZWQobWVzc2FnZXNSZWYsIGFzeW5jIChzbmFwc2hvdCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VJZCA9IHNuYXBzaG90LmtleTtcclxuICAgICAgICBjb25zdCBtZXNzYWdlID0gc25hcHNob3QudmFsKCk7XHJcblxyXG4gICAgICAgIGlmIChsb2FkZWRNZXNzYWdlSWRzLmhhcyhtZXNzYWdlSWQpKSByZXR1cm47XHJcbiAgICAgICAgbG9hZGVkTWVzc2FnZUlkcy5hZGQobWVzc2FnZUlkKTtcclxuXHJcbiAgICAgICAgYXdhaXQgYWRkVGV4dChtZXNzYWdlLCB1c2VySWQsIG1lc3NhZ2VJZCwgdXNlckxpc3QsIGRhdGFiYXNlLCBzdG9yYWdlKTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZXNzYWdlc19pbl9jaGF0XCIpLnNjcm9sbFRvKDAsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVzc2FnZXNfaW5fY2hhdFwiKS5zY3JvbGxIZWlnaHQpO1xyXG4gICAgfSk7XHJcblxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBhZGRUZXh0KG1lc3NhZ2UsIHVzZXJJZCwgbWVzc2FnZUlkLCB1c2VyTGlzdCwgZGF0YWJhc2UsIHN0b3JhZ2UpIHtcclxuICAgIGNvbnN0IGlzU2VuZGVyID0gbWVzc2FnZS5zZW5kZXIgPT09IHVzZXJJZDtcclxuXHJcbiAgICBpZiAobWVzc2FnZS50eXBlID09PSBcInRleHRcIikge1xyXG4gICAgICAgIGF3YWl0IGhhbmRsZVRleHRNZXNzYWdlKG1lc3NhZ2UsIG1lc3NhZ2VJZCwgaXNTZW5kZXIsIHVzZXJMaXN0LCBkYXRhYmFzZSk7XHJcbiAgICAvLyB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJpbWFnZVwiKSB7XHJcbiAgICAvLyAgICAgYXdhaXQgaGFuZGxlTWVkaWFNZXNzYWdlKG1lc3NhZ2UsIG1lc3NhZ2VJZCwgc3RvcmFnZSwgXCJpbWFnZXNcIiwgaXNTZW5kZXIpO1xyXG4gICAgfSBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09IFwiYXVkaW9cIikge1xyXG4gICAgICAgIGF3YWl0IGhhbmRsZU1lZGlhTWVzc2FnZShtZXNzYWdlLCBtZXNzYWdlSWQsIHN0b3JhZ2UsIFwiYXVkaW9zXCIsIGlzU2VuZGVyKTtcclxuICAgIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlVGV4dE1lc3NhZ2UobWVzc2FnZSwgbWVzc2FnZUlkLCBpc1NlbmRlciwgdXNlckxpc3QsIGRhdGFiYXNlKSB7XHJcbiAgICBpZiAoaXNTZW5kZXIpIHtcclxuICAgICAgICAkKFwiI21lc3NhZ2VzX2luX2NoYXRcIikuYXBwZW5kKGA8ZGl2IGlkPScke21lc3NhZ2VJZH0nIGNsYXNzPSdtZXNzYWdlRGl2Jz48c3BhbiBjbGFzcz0nbWVzc2FnZV9zZW5kJz4ke21lc3NhZ2UudGV4dH08L3NwYW4+PGJyPjxzcGFuIGNsYXNzPSdtZXNzYWdlX3NlbmRfZGF0YSc+JHttZXNzYWdlLmRhdGV9PC9zcGFuPjwvZGl2PmApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoIXVzZXJMaXN0W21lc3NhZ2Uuc2VuZGVyXSkge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyU25hcCA9IGF3YWl0IGdldChyZWYoZGF0YWJhc2UsIFwiY2hhdC91c2Vycy9cIiArIG1lc3NhZ2Uuc2VuZGVyKSk7XHJcbiAgICAgICAgICAgIHVzZXJMaXN0W21lc3NhZ2Uuc2VuZGVyXSA9IHVzZXJTbmFwLmV4aXN0cygpID8gdXNlclNuYXAudmFsKCkubmFtZSA6IFwiZGVhZF91c2VyXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoXCIjbWVzc2FnZXNfaW5fY2hhdFwiKS5hcHBlbmQoYDxkaXYgY2xhc3M9J21lc3NhZ2VEaXYnIGlkPScke21lc3NhZ2VJZH0nPjxzcGFuIGNsYXNzPSdtZXNzYWdlX3JlY19kYXRhJz4ke3VzZXJMaXN0W21lc3NhZ2Uuc2VuZGVyXX08L3NwYW4+PGJyPjxzcGFuIGNsYXNzPSdtZXNzYWdlX3JlYyc+JHttZXNzYWdlLnRleHR9PC9zcGFuPjxicj48c3BhbiBjbGFzcz0nbWVzc2FnZV9yZWNfZGF0YSc+JHttZXNzYWdlLmRhdGV9PC9zcGFuPjwvZGl2PmApO1xyXG4gICAgICAgIGlmIChnZXRVc2VyUm9sZSgpID09PSBcIm1vZGVyYXRvclwiKSB7XHJcbiAgICAgICAgICAgIGFkZEJhbm5pbmdPcHRpb24obWVzc2FnZUlkLCBtZXNzYWdlLnNlbmRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRCYW5uaW5nT3B0aW9uKG1lc3NhZ2VJZCwgc2VuZGVySWQpIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1lc3NhZ2VJZCkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICByZXF1ZXN0Rm9vdChcIkNvbmZlcm1pP1wiLFxyXG4gICAgICAgICAgICBgVnVvaSBkYXZ2ZXJvIGJhbm5hcmUgcXVlc3RvIHV0ZW50ZSAodXNlcklkOiAke3NlbmRlcklkfSk/YCxcclxuICAgICAgICAgICAgXCI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2J0biBidG4tZGFuZ2VyIGNoaXVkaScgZGF0YS1icy1kaXNtaXNzPSdtb2RhbCc+Q2FuY2VsPC9idXR0b24+PGJ1dHRvbiBjbGFzcz0nYnRuIGJ0bi1zdWNjZXNzJyBpZD0nZm9yZ290X2NvbmYnIGRhdGEtYnMtZGlzbWlzcz0nbW9kYWwnPkNvbmZpcm08L2J1dHRvbj4gXCIpO1xyXG4gICAgICAgICQoXCIjY29uZmlybV9tb2RhbFwiKS5vZmYoXCJjbGlja1wiKS5vbihcImNsaWNrXCIsKCkgPT4ge1xyXG4gICAgICAgICAgICBiYW5Vc2VyKHNlbmRlcklkKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pXHJcbn1cclxuXHJcbi8vIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZU1lZGlhTWVzc2FnZShtZXNzYWdlLCBtZXNzYWdlSWQsIHN0b3JhZ2UsIGZvbGRlciwgaXNTZW5kZXIpIHtcclxuLy8gICAgIHRyeSB7XHJcbi8vICAgICAgICAgY29uc3QgdXJsID0gYXdhaXQgZ2V0RG93bmxvYWRVUkwoc3RvcmFnZVJlZihzdG9yYWdlLCBgZ3M6Ly90cmVudG9jaGF0LmFwcHNwb3QuY29tLyR7Zm9sZGVyfS9gICsgbWVzc2FnZS50ZXh0KSk7XHJcbi8vICAgICAgICAgY29uc3QgbWVkaWFIdG1sID0gZm9sZGVyID09PSBcImF1ZGlvc1wiXHJcbi8vICAgICAgICAgICAgID8gYDxhdWRpbyBjb250cm9scyBpZD0nJHttZXNzYWdlSWR9JyBjbGFzcz0nJyBzcmM9JyR7dXJsfSc+PC9hdWRpbz5gXHJcbi8vICAgICAgICAgICAgIDogYDxpbWcgaWQ9JyR7bWVzc2FnZUlkfScgY2xhc3M9J2ltYWdlX2NoYXQnIHNyYz0nJHt1cmx9JyBhbHQ9XCJcIj5gO1xyXG4vLyAgICAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IGlzU2VuZGVyID8gJ21lc3NhZ2Vfc2VuZF9kYXRhJyA6ICdtZXNzYWdlX3JlY19kYXRhJztcclxuLy8gICAgICAgICAkKFwiI21lc3NhZ2VzX2luX2NoYXRcIikuYXBwZW5kKGA8cCBjbGFzcz0nJHtpc1NlbmRlciA/IFwidGV4dC1lbmRcIiA6IFwiXCJ9Jz48c3BhbiBjbGFzcz0nJz4ke21lZGlhSHRtbH08L3NwYW4+PGJyPjxzcGFuIGNsYXNzPSdyb3VuZGVkICR7Y2xhc3NOYW1lfSBwLTEnPiR7bWVzc2FnZS5kYXRlfTwvc3Bhbj48L3A+YCk7XHJcbi8vXHJcbi8vICAgICAgICAgaWYgKGZvbGRlciA9PT0gXCJpbWFnZXNcIikge1xyXG4vLyAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtZXNzYWdlSWQpLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAgICAgICAgICAgICBsZXQgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm15TW9kYWxcIik7XHJcbi8vICAgICAgICAgICAgICAgICBsZXQgbW9kYWxJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltZzAxXCIpO1xyXG4vLyAgICAgICAgICAgICAgICAgbW9kYWxJbWcuc3JjID0gJCh0aGlzKS5hdHRyKCdzcmMnKTtcclxuLy8gICAgICAgICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbi8vICAgICAgICAgICAgIH07XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgICAgICBjb25zb2xlLmxvZyhcIk1lZGlhIGRvd25sb2FkIGVycm9yOiBcIiwgZXJyb3IpO1xyXG4vLyAgICAgfVxyXG4vLyB9XHJcblxyXG5leHBvcnQge2FkZENoYXRCdXR0b259Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/LoadChat.js\n");

/***/ }),

/***/ "./src/RegisterAuth.js":
/*!*****************************!*\
  !*** ./src/RegisterAuth.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   forgot: () => (/* binding */ forgot),\n/* harmony export */   registerAuth: () => (/* binding */ registerAuth)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/auth'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utils */ \"./src/Utils.js\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index */ \"./src/index.js\");\n\r\n\r\n\r\n\r\n\r\nfunction registerAuth(database) {\r\n\r\n    let email_reg = $(\"#email_reg\");\r\n    let password_reg = $(\"#password_reg\");\r\n\r\n    if(emailCheck(email_reg.val()) && usernameCheck($(\"#username_reg\").val())\r\n        && bothPasswordsCheck(password_reg.val(),\r\n        $(\"#confirm_password_reg\").val()))  {\r\n        //Firebase registration\r\n        console.log(\"registration\");\r\n        const auth = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/auth'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\r\n        Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/auth'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(auth, email_reg.val(), password_reg.val())\r\n            .then((userCredential) => {\r\n                // Signed in\r\n                const user = userCredential.user;\r\n                const postListRef = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(database, 'chat/users/' + user.uid);\r\n\r\n                Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(postListRef);\r\n                Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(postListRef, {\r\n                    name: $(\"#username_reg\").val()\r\n                }).then(function() {\r\n                    (0,_index__WEBPACK_IMPORTED_MODULE_2__.loadRegisterPage)()\r\n                        .catch((error) => console.log(error));\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                const errorCode = error.code;\r\n                const errorMessage = error.message;\r\n                console.log(errorCode + \": \" + errorMessage)\r\n            });\r\n    }\r\n\r\n}\r\n\r\nasync function forgot (auth) {\r\n\r\n    (0,_Utils__WEBPACK_IMPORTED_MODULE_1__.requestFoot)(\"Recover password\",\r\n        \"<input type='text' class='form-control w-100' placeholder='Enter your email' id='email_reset'>\",\r\n        \"<button type='button' class='btn btn-danger chiudi' data-bs-dismiss='modal'>Cancel</button><button class='btn btn-success' id='forgot_conf' data-bs-dismiss='modal'>Confirm</button> \");\r\n\r\n    document.getElementById(\"confirm_modal\").addEventListener('click', async function forgot () {\r\n        Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/auth'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(auth, $(\"#email_reset\").val())\r\n            .then(() => console.log(\"Email di recupero\"))\r\n            .catch((error) => console.log(error));\r\n    });\r\n}\r\n\r\nfunction emailCheck(email)   {\r\n    if(emptyString(email))   {\r\n        // console.log(\"email vuota\");\r\n        return false;\r\n    } else  {\r\n        return email.includes(\"@\") && email.includes(\".com\");\r\n    }\r\n}\r\n\r\nfunction usernameCheck(username) {\r\n    if(emptyString(username))  {\r\n        (0,_Utils__WEBPACK_IMPORTED_MODULE_1__.warning)(\"Choose a username\");\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nfunction bothPasswordsCheck(password, confirm) {\r\n    if(emptyString(password) || emptyString(confirm))   {\r\n        return false;\r\n    }\r\n    if(password !== confirm)   {\r\n        (0,_Utils__WEBPACK_IMPORTED_MODULE_1__.warning)(\"The password are different\");\r\n        return false;\r\n    }\r\n    // console.log(\"password uguali\");\r\n    return(stringCheck(password));\r\n}\r\n\r\nfunction emptyString(string)  {\r\n    return string === \"\";\r\n}\r\n\r\nfunction stringCheck(string) {\r\n    const lowerCaseLetters = /[a-z]/g;\r\n    const upperCaseLetters = /[A-Z]/g;\r\n    const numbers = /[0-9]/g;\r\n\r\n    if(string.length < 8)  {\r\n        (0,_Utils__WEBPACK_IMPORTED_MODULE_1__.warning)(\"The password must contain at least 8 characters\");\r\n        return false;\r\n    }\r\n\r\n    if(!string.match(numbers))   {\r\n        (0,_Utils__WEBPACK_IMPORTED_MODULE_1__.warning)(\"The password must contain a number\");\r\n        return false;\r\n    }\r\n\r\n    if(!string.match(lowerCaseLetters))   {\r\n        (0,_Utils__WEBPACK_IMPORTED_MODULE_1__.warning)(\"The password must contain a lower case letter\");\r\n        return false;\r\n    }\r\n\r\n    if(!string.match(upperCaseLetters))   {\r\n        (0,_Utils__WEBPACK_IMPORTED_MODULE_1__.warning)(\"The password must contain a upper case letter\");\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvUmVnaXN0ZXJBdXRoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE4RjtBQUM3QztBQUNKO0FBQ0o7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiw0SUFBTztBQUM1QixRQUFRLDRJQUE4QjtBQUN0QztBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsZ0pBQUc7QUFDdkM7QUFDQSxnQkFBZ0IsZ0pBQUk7QUFDcEIsZ0JBQWdCLGdKQUFHO0FBQ25CO0FBQ0EsaUJBQWlCO0FBQ2pCLG9CQUFvQix3REFBZ0I7QUFDcEM7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksbURBQVc7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsNElBQXNCO0FBQzlCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0NBQU87QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrQ0FBTztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrQ0FBTztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrQ0FBTztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrQ0FBTztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrQ0FBTztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbmRleC8uL3NyYy9SZWdpc3RlckF1dGguanM/ODU5YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2NyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCwgZ2V0QXV0aCwgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbH0gZnJvbSBcImZpcmViYXNlL2F1dGhcIjtcclxuaW1wb3J0IHtwdXNoLCByZWYsIHNldH0gZnJvbSBcImZpcmViYXNlL2RhdGFiYXNlXCI7XHJcbmltcG9ydCB7cmVxdWVzdEZvb3QsIHdhcm5pbmd9IGZyb20gXCIuL1V0aWxzXCI7XHJcbmltcG9ydCB7bG9hZFJlZ2lzdGVyUGFnZX0gZnJvbSBcIi4vaW5kZXhcIjtcclxuXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQXV0aChkYXRhYmFzZSkge1xyXG5cclxuICAgIGxldCBlbWFpbF9yZWcgPSAkKFwiI2VtYWlsX3JlZ1wiKTtcclxuICAgIGxldCBwYXNzd29yZF9yZWcgPSAkKFwiI3Bhc3N3b3JkX3JlZ1wiKTtcclxuXHJcbiAgICBpZihlbWFpbENoZWNrKGVtYWlsX3JlZy52YWwoKSkgJiYgdXNlcm5hbWVDaGVjaygkKFwiI3VzZXJuYW1lX3JlZ1wiKS52YWwoKSlcclxuICAgICAgICAmJiBib3RoUGFzc3dvcmRzQ2hlY2socGFzc3dvcmRfcmVnLnZhbCgpLFxyXG4gICAgICAgICQoXCIjY29uZmlybV9wYXNzd29yZF9yZWdcIikudmFsKCkpKSAge1xyXG4gICAgICAgIC8vRmlyZWJhc2UgcmVnaXN0cmF0aW9uXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJyZWdpc3RyYXRpb25cIik7XHJcbiAgICAgICAgY29uc3QgYXV0aCA9IGdldEF1dGgoKTtcclxuICAgICAgICBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWxfcmVnLnZhbCgpLCBwYXNzd29yZF9yZWcudmFsKCkpXHJcbiAgICAgICAgICAgIC50aGVuKCh1c2VyQ3JlZGVudGlhbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gU2lnbmVkIGluXHJcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gdXNlckNyZWRlbnRpYWwudXNlcjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvc3RMaXN0UmVmID0gcmVmKGRhdGFiYXNlLCAnY2hhdC91c2Vycy8nICsgdXNlci51aWQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHB1c2gocG9zdExpc3RSZWYpO1xyXG4gICAgICAgICAgICAgICAgc2V0KHBvc3RMaXN0UmVmLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJChcIiN1c2VybmFtZV9yZWdcIikudmFsKClcclxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZFJlZ2lzdGVyUGFnZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKGVycm9yKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JDb2RlID0gZXJyb3IuY29kZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvckNvZGUgKyBcIjogXCIgKyBlcnJvck1lc3NhZ2UpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZm9yZ290IChhdXRoKSB7XHJcblxyXG4gICAgcmVxdWVzdEZvb3QoXCJSZWNvdmVyIHBhc3N3b3JkXCIsXHJcbiAgICAgICAgXCI8aW5wdXQgdHlwZT0ndGV4dCcgY2xhc3M9J2Zvcm0tY29udHJvbCB3LTEwMCcgcGxhY2Vob2xkZXI9J0VudGVyIHlvdXIgZW1haWwnIGlkPSdlbWFpbF9yZXNldCc+XCIsXHJcbiAgICAgICAgXCI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2J0biBidG4tZGFuZ2VyIGNoaXVkaScgZGF0YS1icy1kaXNtaXNzPSdtb2RhbCc+Q2FuY2VsPC9idXR0b24+PGJ1dHRvbiBjbGFzcz0nYnRuIGJ0bi1zdWNjZXNzJyBpZD0nZm9yZ290X2NvbmYnIGRhdGEtYnMtZGlzbWlzcz0nbW9kYWwnPkNvbmZpcm08L2J1dHRvbj4gXCIpO1xyXG5cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlybV9tb2RhbFwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIGZ1bmN0aW9uIGZvcmdvdCAoKSB7XHJcbiAgICAgICAgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChhdXRoLCAkKFwiI2VtYWlsX3Jlc2V0XCIpLnZhbCgpKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiBjb25zb2xlLmxvZyhcIkVtYWlsIGRpIHJlY3VwZXJvXCIpKVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhlcnJvcikpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVtYWlsQ2hlY2soZW1haWwpICAge1xyXG4gICAgaWYoZW1wdHlTdHJpbmcoZW1haWwpKSAgIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcImVtYWlsIHZ1b3RhXCIpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0gZWxzZSAge1xyXG4gICAgICAgIHJldHVybiBlbWFpbC5pbmNsdWRlcyhcIkBcIikgJiYgZW1haWwuaW5jbHVkZXMoXCIuY29tXCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB1c2VybmFtZUNoZWNrKHVzZXJuYW1lKSB7XHJcbiAgICBpZihlbXB0eVN0cmluZyh1c2VybmFtZSkpICB7XHJcbiAgICAgICAgd2FybmluZyhcIkNob29zZSBhIHVzZXJuYW1lXCIpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gYm90aFBhc3N3b3Jkc0NoZWNrKHBhc3N3b3JkLCBjb25maXJtKSB7XHJcbiAgICBpZihlbXB0eVN0cmluZyhwYXNzd29yZCkgfHwgZW1wdHlTdHJpbmcoY29uZmlybSkpICAge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmKHBhc3N3b3JkICE9PSBjb25maXJtKSAgIHtcclxuICAgICAgICB3YXJuaW5nKFwiVGhlIHBhc3N3b3JkIGFyZSBkaWZmZXJlbnRcIik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2coXCJwYXNzd29yZCB1Z3VhbGlcIik7XHJcbiAgICByZXR1cm4oc3RyaW5nQ2hlY2socGFzc3dvcmQpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW1wdHlTdHJpbmcoc3RyaW5nKSAge1xyXG4gICAgcmV0dXJuIHN0cmluZyA9PT0gXCJcIjtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RyaW5nQ2hlY2soc3RyaW5nKSB7XHJcbiAgICBjb25zdCBsb3dlckNhc2VMZXR0ZXJzID0gL1thLXpdL2c7XHJcbiAgICBjb25zdCB1cHBlckNhc2VMZXR0ZXJzID0gL1tBLVpdL2c7XHJcbiAgICBjb25zdCBudW1iZXJzID0gL1swLTldL2c7XHJcblxyXG4gICAgaWYoc3RyaW5nLmxlbmd0aCA8IDgpICB7XHJcbiAgICAgICAgd2FybmluZyhcIlRoZSBwYXNzd29yZCBtdXN0IGNvbnRhaW4gYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZighc3RyaW5nLm1hdGNoKG51bWJlcnMpKSAgIHtcclxuICAgICAgICB3YXJuaW5nKFwiVGhlIHBhc3N3b3JkIG11c3QgY29udGFpbiBhIG51bWJlclwiKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoIXN0cmluZy5tYXRjaChsb3dlckNhc2VMZXR0ZXJzKSkgICB7XHJcbiAgICAgICAgd2FybmluZyhcIlRoZSBwYXNzd29yZCBtdXN0IGNvbnRhaW4gYSBsb3dlciBjYXNlIGxldHRlclwiKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoIXN0cmluZy5tYXRjaCh1cHBlckNhc2VMZXR0ZXJzKSkgICB7XHJcbiAgICAgICAgd2FybmluZyhcIlRoZSBwYXNzd29yZCBtdXN0IGNvbnRhaW4gYSB1cHBlciBjYXNlIGxldHRlclwiKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZXhwb3J0IHtyZWdpc3RlckF1dGgsIGZvcmdvdH0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/RegisterAuth.js\n");

/***/ }),

/***/ "./src/User.js":
/*!*********************!*\
  !*** ./src/User.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   User: () => (/* binding */ User)\n/* harmony export */ });\nclass User {\r\n    constructor(username, roles = []) {\r\n        this.username = username;\r\n        this.roles = roles;\r\n    }\r\n\r\n    addRole(role) {\r\n        if (!this.roles.includes(role)) {\r\n            this.roles.push(role);\r\n        }\r\n    }\r\n\r\n    removeRole(role) {\r\n        this.roles = this.roles.filter(r => r !== role);\r\n    }\r\n\r\n    hasRole(role) {\r\n        return this.roles.includes(role);\r\n    }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvVXNlci5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2luZGV4Ly4vc3JjL1VzZXIuanM/NGY2MyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgVXNlciB7XHJcbiAgICBjb25zdHJ1Y3Rvcih1c2VybmFtZSwgcm9sZXMgPSBbXSkge1xyXG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcclxuICAgICAgICB0aGlzLnJvbGVzID0gcm9sZXM7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkUm9sZShyb2xlKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJvbGVzLmluY2x1ZGVzKHJvbGUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucm9sZXMucHVzaChyb2xlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlUm9sZShyb2xlKSB7XHJcbiAgICAgICAgdGhpcy5yb2xlcyA9IHRoaXMucm9sZXMuZmlsdGVyKHIgPT4gciAhPT0gcm9sZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzUm9sZShyb2xlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucm9sZXMuaW5jbHVkZXMocm9sZSk7XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/User.js\n");

/***/ }),

/***/ "./src/Utils.js":
/*!**********************!*\
  !*** ./src/Utils.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatTime: () => (/* binding */ formatTime),\n/* harmony export */   getTimeString: () => (/* binding */ getTimeString),\n/* harmony export */   request: () => (/* binding */ request),\n/* harmony export */   requestFoot: () => (/* binding */ requestFoot),\n/* harmony export */   warning: () => (/* binding */ warning)\n/* harmony export */ });\nfunction warning(error) {\r\n    $(\"#modal_title_warning\").html(error);\r\n    $(\"#warning\").modal(\"show\");\r\n}\r\n\r\nfunction request(title, body) {\r\n    $(\"#modal_title\").html(title);\r\n    $(\"#modal_content\").html(body);\r\n    $(\"#confirmModal\").modal(\"show\");\r\n}\r\n\r\nfunction requestFoot(title, body, footer) {\r\n    $(\"#modal_title\").html(title);\r\n    $(\"#modal_content\").html(body);\r\n    $(\"#footer\").html(footer);\r\n    $(\"#confirmModal\").modal(\"show\");\r\n}\r\n\r\nfunction getTimeString() {\r\n    let now = new Date();\r\n    return String(now.getFullYear() % 1000) + \"-\" + String(now.getMonth() + 1).padStart(2, '0') + \"-\"\r\n    + String(now.getDate()).padStart(2, '0') + \" \" + String(now.getHours()) + \":\"\r\n    + formatTime(now.getMinutes()) + \":\" + formatTime(now.getSeconds())\r\n}\r\n\r\nfunction formatTime(time) {\r\n    return time < 10? ('0' + time) : time;\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvVXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5kZXgvLi9zcmMvVXRpbHMuanM/OWM4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiB3YXJuaW5nKGVycm9yKSB7XHJcbiAgICAkKFwiI21vZGFsX3RpdGxlX3dhcm5pbmdcIikuaHRtbChlcnJvcik7XHJcbiAgICAkKFwiI3dhcm5pbmdcIikubW9kYWwoXCJzaG93XCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXF1ZXN0KHRpdGxlLCBib2R5KSB7XHJcbiAgICAkKFwiI21vZGFsX3RpdGxlXCIpLmh0bWwodGl0bGUpO1xyXG4gICAgJChcIiNtb2RhbF9jb250ZW50XCIpLmh0bWwoYm9keSk7XHJcbiAgICAkKFwiI2NvbmZpcm1Nb2RhbFwiKS5tb2RhbChcInNob3dcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlcXVlc3RGb290KHRpdGxlLCBib2R5LCBmb290ZXIpIHtcclxuICAgICQoXCIjbW9kYWxfdGl0bGVcIikuaHRtbCh0aXRsZSk7XHJcbiAgICAkKFwiI21vZGFsX2NvbnRlbnRcIikuaHRtbChib2R5KTtcclxuICAgICQoXCIjZm9vdGVyXCIpLmh0bWwoZm9vdGVyKTtcclxuICAgICQoXCIjY29uZmlybU1vZGFsXCIpLm1vZGFsKFwic2hvd1wiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VGltZVN0cmluZygpIHtcclxuICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgcmV0dXJuIFN0cmluZyhub3cuZ2V0RnVsbFllYXIoKSAlIDEwMDApICsgXCItXCIgKyBTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpICsgXCItXCJcclxuICAgICsgU3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJykgKyBcIiBcIiArIFN0cmluZyhub3cuZ2V0SG91cnMoKSkgKyBcIjpcIlxyXG4gICAgKyBmb3JtYXRUaW1lKG5vdy5nZXRNaW51dGVzKCkpICsgXCI6XCIgKyBmb3JtYXRUaW1lKG5vdy5nZXRTZWNvbmRzKCkpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdFRpbWUodGltZSkge1xyXG4gICAgcmV0dXJuIHRpbWUgPCAxMD8gKCcwJyArIHRpbWUpIDogdGltZTtcclxufVxyXG5cclxuZXhwb3J0IHt3YXJuaW5nLCByZXF1ZXN0LCByZXF1ZXN0Rm9vdCwgZm9ybWF0VGltZSwgZ2V0VGltZVN0cmluZ30iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/Utils.js\n");

/***/ }),

/***/ "./src/VoiceManager.js":
/*!*****************************!*\
  !*** ./src/VoiceManager.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   startVoice: () => (/* binding */ startVoice)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utils */ \"./src/Utils.js\");\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/storage'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\r\n\r\n\r\n\r\nasync function startVoice(database, userId, chatWorld, storage){\r\n\r\n    $(\"#voice\").prop(\"hidden\", true);\r\n    $(\"#btnStop\").prop(\"hidden\", false);\r\n\r\n    let constraintObj = {\r\n        audio: true,\r\n        video: false\r\n    };\r\n\r\n    let stream = await navigator.mediaDevices.getUserMedia(constraintObj);\r\n    let mediaRecorder = new MediaRecorder(stream);\r\n    let chunks = [];\r\n\r\n    mediaRecorder.start();\r\n\r\n    document.getElementById('btnStop').addEventListener('click', ()=>{\r\n        $(\"#btnStop\").prop(\"hidden\", true);\r\n        $(\"#voice\").prop(\"hidden\", false);\r\n        mediaRecorder.stop();\r\n        console.log(mediaRecorder.state);\r\n    }, {once:true});\r\n\r\n\r\n    mediaRecorder.ondataavailable = function(ev) {\r\n        chunks.push(ev.data);\r\n    };\r\n\r\n    mediaRecorder.onstop = async function() {\r\n        let blob = new Blob(chunks, { 'type' : 'audio/mpeg' });\r\n        chunks = [];\r\n\r\n        stream.getTracks() // get all tracks from the MediaStream\r\n            .forEach( track => track.stop()); // stop each of them\r\n\r\n        if(chatWorld) {\r\n            const postListRef = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(database, 'chat/messages/' + chatWorld + '/messages');\r\n            const newPostRef = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(postListRef);\r\n            const audioRef = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/storage'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(storage, 'audios/' + newPostRef.key);\r\n            Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/storage'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(audioRef, blob)\r\n                .then(async () => {\r\n                    await Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(newPostRef, {\r\n                        date: (0,_Utils__WEBPACK_IMPORTED_MODULE_1__.getTimeString)(),\r\n                        sender: userId,\r\n                        text : newPostRef.key,\r\n                        type: \"audio\"\r\n                    });\r\n                })\r\n                .catch((error) => {\r\n                console.log(error)\r\n            });\r\n        }\r\n    };\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvVm9pY2VNYW5hZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUQ7QUFDWDtBQUMwQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssR0FBRyxVQUFVO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHVCQUF1QjtBQUM3RDtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBLGdDQUFnQyxnSkFBRztBQUNuQywrQkFBK0IsZ0pBQUk7QUFDbkMsNkJBQTZCLCtJQUFVO0FBQ3ZDLFlBQVksK0lBQVc7QUFDdkI7QUFDQSwwQkFBMEIsZ0pBQUc7QUFDN0IsOEJBQThCLHFEQUFhO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2luZGV4Ly4vc3JjL1ZvaWNlTWFuYWdlci5qcz9hNmI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7cHVzaCwgcmVmLCBzZXR9IGZyb20gXCJmaXJlYmFzZS9kYXRhYmFzZVwiO1xyXG5pbXBvcnQge2dldFRpbWVTdHJpbmd9IGZyb20gXCIuL1V0aWxzXCI7XHJcbmltcG9ydCB7cmVmIGFzIHN0b3JhZ2VSZWYsIHVwbG9hZEJ5dGVzfSBmcm9tIFwiZmlyZWJhc2Uvc3RvcmFnZVwiO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gc3RhcnRWb2ljZShkYXRhYmFzZSwgdXNlcklkLCBjaGF0V29ybGQsIHN0b3JhZ2Upe1xyXG5cclxuICAgICQoXCIjdm9pY2VcIikucHJvcChcImhpZGRlblwiLCB0cnVlKTtcclxuICAgICQoXCIjYnRuU3RvcFwiKS5wcm9wKFwiaGlkZGVuXCIsIGZhbHNlKTtcclxuXHJcbiAgICBsZXQgY29uc3RyYWludE9iaiA9IHtcclxuICAgICAgICBhdWRpbzogdHJ1ZSxcclxuICAgICAgICB2aWRlbzogZmFsc2VcclxuICAgIH07XHJcblxyXG4gICAgbGV0IHN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRPYmopO1xyXG4gICAgbGV0IG1lZGlhUmVjb3JkZXIgPSBuZXcgTWVkaWFSZWNvcmRlcihzdHJlYW0pO1xyXG4gICAgbGV0IGNodW5rcyA9IFtdO1xyXG5cclxuICAgIG1lZGlhUmVjb3JkZXIuc3RhcnQoKTtcclxuXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuU3RvcCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcclxuICAgICAgICAkKFwiI2J0blN0b3BcIikucHJvcChcImhpZGRlblwiLCB0cnVlKTtcclxuICAgICAgICAkKFwiI3ZvaWNlXCIpLnByb3AoXCJoaWRkZW5cIiwgZmFsc2UpO1xyXG4gICAgICAgIG1lZGlhUmVjb3JkZXIuc3RvcCgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG1lZGlhUmVjb3JkZXIuc3RhdGUpO1xyXG4gICAgfSwge29uY2U6dHJ1ZX0pO1xyXG5cclxuXHJcbiAgICBtZWRpYVJlY29yZGVyLm9uZGF0YWF2YWlsYWJsZSA9IGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgY2h1bmtzLnB1c2goZXYuZGF0YSk7XHJcbiAgICB9O1xyXG5cclxuICAgIG1lZGlhUmVjb3JkZXIub25zdG9wID0gYXN5bmMgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgbGV0IGJsb2IgPSBuZXcgQmxvYihjaHVua3MsIHsgJ3R5cGUnIDogJ2F1ZGlvL21wZWcnIH0pO1xyXG4gICAgICAgIGNodW5rcyA9IFtdO1xyXG5cclxuICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkgLy8gZ2V0IGFsbCB0cmFja3MgZnJvbSB0aGUgTWVkaWFTdHJlYW1cclxuICAgICAgICAgICAgLmZvckVhY2goIHRyYWNrID0+IHRyYWNrLnN0b3AoKSk7IC8vIHN0b3AgZWFjaCBvZiB0aGVtXHJcblxyXG4gICAgICAgIGlmKGNoYXRXb3JsZCkge1xyXG4gICAgICAgICAgICBjb25zdCBwb3N0TGlzdFJlZiA9IHJlZihkYXRhYmFzZSwgJ2NoYXQvbWVzc2FnZXMvJyArIGNoYXRXb3JsZCArICcvbWVzc2FnZXMnKTtcclxuICAgICAgICAgICAgY29uc3QgbmV3UG9zdFJlZiA9IHB1c2gocG9zdExpc3RSZWYpO1xyXG4gICAgICAgICAgICBjb25zdCBhdWRpb1JlZiA9IHN0b3JhZ2VSZWYoc3RvcmFnZSwgJ2F1ZGlvcy8nICsgbmV3UG9zdFJlZi5rZXkpO1xyXG4gICAgICAgICAgICB1cGxvYWRCeXRlcyhhdWRpb1JlZiwgYmxvYilcclxuICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXQobmV3UG9zdFJlZiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBnZXRUaW1lU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRlcjogdXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0IDogbmV3UG9zdFJlZi5rZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYXVkaW9cIlxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQge3N0YXJ0Vm9pY2V9Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/VoiceManager.js\n");

/***/ }),

/***/ "./src/admin.js":
/*!**********************!*\
  !*** ./src/admin.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   banUser: () => (/* binding */ banUser),\n/* harmony export */   changeRole: () => (/* binding */ changeRole),\n/* harmony export */   enableUser: () => (/* binding */ enableUser)\n/* harmony export */ });\nfunction banUser(userId) {\r\n    fetch(\"http://localhost:3000/disable-user\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ uid: userId })\r\n    })\r\n        .then(res => res.text())\r\n        .then(msg => console.log(msg))\r\n        .catch(err => console.error(err));\r\n}\r\n\r\nfunction enableUser(userId) {\r\n    fetch(\"http://localhost:3000/enable-user\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ uid: userId })\r\n    })\r\n        .then(res => res.text())\r\n        .then(msg => console.log(msg))\r\n        .catch(err => console.error(err));\r\n}\r\n\r\nfunction changeRole(userId, newRole) {\r\n    fetch(\"http://localhost:3000/set-role\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ uid: userId, role: newRole })\r\n    })\r\n        .then(res => res.text())\r\n        .then(console.log)\r\n        .catch(console.error);\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYWRtaW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG9DQUFvQztBQUN2RCwrQkFBK0IsYUFBYTtBQUM1QyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixvQ0FBb0M7QUFDdkQsK0JBQStCLGFBQWE7QUFDNUMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsb0NBQW9DO0FBQ3ZELCtCQUErQiw0QkFBNEI7QUFDM0QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbmRleC8uL3NyYy9hZG1pbi5qcz9lYjU5Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGJhblVzZXIodXNlcklkKSB7XHJcbiAgICBmZXRjaChcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9kaXNhYmxlLXVzZXJcIiwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdWlkOiB1c2VySWQgfSlcclxuICAgIH0pXHJcbiAgICAgICAgLnRoZW4ocmVzID0+IHJlcy50ZXh0KCkpXHJcbiAgICAgICAgLnRoZW4obXNnID0+IGNvbnNvbGUubG9nKG1zZykpXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmFibGVVc2VyKHVzZXJJZCkge1xyXG4gICAgZmV0Y2goXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvZW5hYmxlLXVzZXJcIiwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdWlkOiB1c2VySWQgfSlcclxuICAgIH0pXHJcbiAgICAgICAgLnRoZW4ocmVzID0+IHJlcy50ZXh0KCkpXHJcbiAgICAgICAgLnRoZW4obXNnID0+IGNvbnNvbGUubG9nKG1zZykpXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VSb2xlKHVzZXJJZCwgbmV3Um9sZSkge1xyXG4gICAgZmV0Y2goXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvc2V0LXJvbGVcIiwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdWlkOiB1c2VySWQsIHJvbGU6IG5ld1JvbGUgfSlcclxuICAgIH0pXHJcbiAgICAgICAgLnRoZW4ocmVzID0+IHJlcy50ZXh0KCkpXHJcbiAgICAgICAgLnRoZW4oY29uc29sZS5sb2cpXHJcbiAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG59XHJcblxyXG5leHBvcnQge2JhblVzZXIsIGNoYW5nZVJvbGUsIGVuYWJsZVVzZXJ9Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/admin.js\n");

/***/ }),

/***/ "./src/chatManager.js":
/*!****************************!*\
  !*** ./src/chatManager.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteChat: () => (/* binding */ deleteChat),\n/* harmony export */   exitChat: () => (/* binding */ exitChat),\n/* harmony export */   send: () => (/* binding */ send),\n/* harmony export */   sendMessage: () => (/* binding */ sendMessage)\n/* harmony export */ });\n/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Utils */ \"./src/Utils.js\");\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/storage'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index */ \"./src/index.js\");\n\r\n\r\n\r\n\r\n\r\nfunction send(database, chatWorld, userId, fileToUpload, storage) {\r\n    if(chatWorld){\r\n        if(($(\"#send_message\").val() !== \"\" )){\r\n            sendMessage(database, chatWorld, userId)\r\n                .catch((error) => console.log(error));\r\n        } else if (fileToUpload) {\r\n            sendFile(database, chatWorld, userId, storage)\r\n                .then(() => fileToUpload = false)\r\n                .catch((error) => {console.log(error)})\r\n        }\r\n    }\r\n}\r\n\r\nasync function sendMessage(database, chatWorld, userId) {\r\n    const postListRef = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(database, 'chat/messages/' + chatWorld + '/messages');\r\n    const newPostRef = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(postListRef);\r\n\r\n    await Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(newPostRef, {\r\n        date: (0,_Utils__WEBPACK_IMPORTED_MODULE_0__.getTimeString)(),\r\n        sender: userId,\r\n        text : $(\"#send_message\").val(),\r\n        type: \"text\"\r\n    });\r\n\r\n    $('#send_message').val('');\r\n}\r\n\r\n// async function sendFile(database, chatWorld, userId, storage) {\r\n//     const postListRef = ref(database, 'chat/messages/' + chatWorld + '/messages');\r\n//     const newPostRef = push(postListRef);\r\n//\r\n//     let file = document.getElementById(\"myFile\").files[0];\r\n//     const uploadRef = storageRef(storage, 'images/' + newPostRef.key);\r\n//\r\n//     await uploadBytes(uploadRef, file).then(() => {\r\n//         console.log('Uploaded a blob or file!');\r\n//     });\r\n//\r\n//     await set(newPostRef, {\r\n//         date: getTimeString(),\r\n//         sender: userId,\r\n//         text : newPostRef.key ,\r\n//         type: \"image\"\r\n//     });\r\n//\r\n//     setFileToUpload(false);\r\n// }\r\n\r\nfunction deleteChat(database, chatWorld) {\r\n    (0,_Utils__WEBPACK_IMPORTED_MODULE_0__.request)(\"Are you sure?\", \"Do you really want to delete all the messages from this chat? \\n They will be lost forever\");\r\n\r\n    document.getElementById(\"confirm_modal\").addEventListener('click', function () {\r\n        Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(database, \"chat/messages/\" + chatWorld + \"/messages\"), {\r\n\r\n        }).catch((error) => console.log(\"error deleting the chat: \" + error));\r\n    }, {once:true});\r\n}\r\n\r\nfunction exitChat(database, chatWorld, chatWorldId, userId) {\r\n    (0,_Utils__WEBPACK_IMPORTED_MODULE_0__.request)(\"Are you sure?\", \"Do you really want to exit this chat?\");\r\n\r\n    document.getElementById(\"confirm_modal\").addEventListener('click', async function () {\r\n\r\n        // console.log(chat_world_id);\r\n        await Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(database,\"chat/users/\" + userId + \"/chats/\" + chatWorldId), {\r\n            chatname: null\r\n        }).then(() => {\r\n            (0,_index__WEBPACK_IMPORTED_MODULE_2__.remove_chat_world)();\r\n            $(\"#messages_in_chat\").empty();\r\n            $(\"#chat_picture\").attr('src', null);\r\n            $(\"#chat_name_title\").html('');\r\n        })\r\n        ;\r\n\r\n\r\n\r\n    });\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY2hhdE1hbmFnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0M7QUFDRTtBQUNlO0FBQ0w7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxtQ0FBbUMsbUJBQW1CO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0pBQUc7QUFDM0IsdUJBQXVCLGdKQUFJO0FBQzNCO0FBQ0EsVUFBVSxnSkFBRztBQUNiLGNBQWMscURBQWE7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSwrQ0FBTztBQUNYO0FBQ0E7QUFDQSxRQUFRLGdKQUFHLENBQUMsZ0pBQUc7QUFDZjtBQUNBLFNBQVM7QUFDVCxLQUFLLEdBQUcsVUFBVTtBQUNsQjtBQUNBO0FBQ0E7QUFDQSxJQUFJLCtDQUFPO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGdKQUFHLENBQUMsZ0pBQUc7QUFDckI7QUFDQSxTQUFTO0FBQ1QsWUFBWSx5REFBaUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbmRleC8uL3NyYy9jaGF0TWFuYWdlci5qcz9lOTZhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Z2V0VGltZVN0cmluZywgcmVxdWVzdH0gZnJvbSBcIi4vVXRpbHNcIjtcclxuaW1wb3J0IHtwdXNoLCByZWYsIHNldH0gZnJvbSBcImZpcmViYXNlL2RhdGFiYXNlXCI7XHJcbmltcG9ydCB7cmVmIGFzIHN0b3JhZ2VSZWYsIHVwbG9hZEJ5dGVzfSBmcm9tIFwiZmlyZWJhc2Uvc3RvcmFnZVwiO1xyXG5pbXBvcnQge3NldEZpbGVUb1VwbG9hZCwgcmVtb3ZlX2NoYXRfd29ybGR9IGZyb20gXCIuL2luZGV4XCI7XHJcblxyXG5mdW5jdGlvbiBzZW5kKGRhdGFiYXNlLCBjaGF0V29ybGQsIHVzZXJJZCwgZmlsZVRvVXBsb2FkLCBzdG9yYWdlKSB7XHJcbiAgICBpZihjaGF0V29ybGQpe1xyXG4gICAgICAgIGlmKCgkKFwiI3NlbmRfbWVzc2FnZVwiKS52YWwoKSAhPT0gXCJcIiApKXtcclxuICAgICAgICAgICAgc2VuZE1lc3NhZ2UoZGF0YWJhc2UsIGNoYXRXb3JsZCwgdXNlcklkKVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coZXJyb3IpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGZpbGVUb1VwbG9hZCkge1xyXG4gICAgICAgICAgICBzZW5kRmlsZShkYXRhYmFzZSwgY2hhdFdvcmxkLCB1c2VySWQsIHN0b3JhZ2UpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiBmaWxlVG9VcGxvYWQgPSBmYWxzZSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtjb25zb2xlLmxvZyhlcnJvcil9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gc2VuZE1lc3NhZ2UoZGF0YWJhc2UsIGNoYXRXb3JsZCwgdXNlcklkKSB7XHJcbiAgICBjb25zdCBwb3N0TGlzdFJlZiA9IHJlZihkYXRhYmFzZSwgJ2NoYXQvbWVzc2FnZXMvJyArIGNoYXRXb3JsZCArICcvbWVzc2FnZXMnKTtcclxuICAgIGNvbnN0IG5ld1Bvc3RSZWYgPSBwdXNoKHBvc3RMaXN0UmVmKTtcclxuXHJcbiAgICBhd2FpdCBzZXQobmV3UG9zdFJlZiwge1xyXG4gICAgICAgIGRhdGU6IGdldFRpbWVTdHJpbmcoKSxcclxuICAgICAgICBzZW5kZXI6IHVzZXJJZCxcclxuICAgICAgICB0ZXh0IDogJChcIiNzZW5kX21lc3NhZ2VcIikudmFsKCksXHJcbiAgICAgICAgdHlwZTogXCJ0ZXh0XCJcclxuICAgIH0pO1xyXG5cclxuICAgICQoJyNzZW5kX21lc3NhZ2UnKS52YWwoJycpO1xyXG59XHJcblxyXG4vLyBhc3luYyBmdW5jdGlvbiBzZW5kRmlsZShkYXRhYmFzZSwgY2hhdFdvcmxkLCB1c2VySWQsIHN0b3JhZ2UpIHtcclxuLy8gICAgIGNvbnN0IHBvc3RMaXN0UmVmID0gcmVmKGRhdGFiYXNlLCAnY2hhdC9tZXNzYWdlcy8nICsgY2hhdFdvcmxkICsgJy9tZXNzYWdlcycpO1xyXG4vLyAgICAgY29uc3QgbmV3UG9zdFJlZiA9IHB1c2gocG9zdExpc3RSZWYpO1xyXG4vL1xyXG4vLyAgICAgbGV0IGZpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm15RmlsZVwiKS5maWxlc1swXTtcclxuLy8gICAgIGNvbnN0IHVwbG9hZFJlZiA9IHN0b3JhZ2VSZWYoc3RvcmFnZSwgJ2ltYWdlcy8nICsgbmV3UG9zdFJlZi5rZXkpO1xyXG4vL1xyXG4vLyAgICAgYXdhaXQgdXBsb2FkQnl0ZXModXBsb2FkUmVmLCBmaWxlKS50aGVuKCgpID0+IHtcclxuLy8gICAgICAgICBjb25zb2xlLmxvZygnVXBsb2FkZWQgYSBibG9iIG9yIGZpbGUhJyk7XHJcbi8vICAgICB9KTtcclxuLy9cclxuLy8gICAgIGF3YWl0IHNldChuZXdQb3N0UmVmLCB7XHJcbi8vICAgICAgICAgZGF0ZTogZ2V0VGltZVN0cmluZygpLFxyXG4vLyAgICAgICAgIHNlbmRlcjogdXNlcklkLFxyXG4vLyAgICAgICAgIHRleHQgOiBuZXdQb3N0UmVmLmtleSAsXHJcbi8vICAgICAgICAgdHlwZTogXCJpbWFnZVwiXHJcbi8vICAgICB9KTtcclxuLy9cclxuLy8gICAgIHNldEZpbGVUb1VwbG9hZChmYWxzZSk7XHJcbi8vIH1cclxuXHJcbmZ1bmN0aW9uIGRlbGV0ZUNoYXQoZGF0YWJhc2UsIGNoYXRXb3JsZCkge1xyXG4gICAgcmVxdWVzdChcIkFyZSB5b3Ugc3VyZT9cIiwgXCJEbyB5b3UgcmVhbGx5IHdhbnQgdG8gZGVsZXRlIGFsbCB0aGUgbWVzc2FnZXMgZnJvbSB0aGlzIGNoYXQ/IFxcbiBUaGV5IHdpbGwgYmUgbG9zdCBmb3JldmVyXCIpO1xyXG5cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlybV9tb2RhbFwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZXQocmVmKGRhdGFiYXNlLCBcImNoYXQvbWVzc2FnZXMvXCIgKyBjaGF0V29ybGQgKyBcIi9tZXNzYWdlc1wiKSwge1xyXG5cclxuICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKFwiZXJyb3IgZGVsZXRpbmcgdGhlIGNoYXQ6IFwiICsgZXJyb3IpKTtcclxuICAgIH0sIHtvbmNlOnRydWV9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZXhpdENoYXQoZGF0YWJhc2UsIGNoYXRXb3JsZCwgY2hhdFdvcmxkSWQsIHVzZXJJZCkge1xyXG4gICAgcmVxdWVzdChcIkFyZSB5b3Ugc3VyZT9cIiwgXCJEbyB5b3UgcmVhbGx5IHdhbnQgdG8gZXhpdCB0aGlzIGNoYXQ/XCIpO1xyXG5cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlybV9tb2RhbFwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coY2hhdF93b3JsZF9pZCk7XHJcbiAgICAgICAgYXdhaXQgc2V0KHJlZihkYXRhYmFzZSxcImNoYXQvdXNlcnMvXCIgKyB1c2VySWQgKyBcIi9jaGF0cy9cIiArIGNoYXRXb3JsZElkKSwge1xyXG4gICAgICAgICAgICBjaGF0bmFtZTogbnVsbFxyXG4gICAgICAgIH0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICByZW1vdmVfY2hhdF93b3JsZCgpO1xyXG4gICAgICAgICAgICAkKFwiI21lc3NhZ2VzX2luX2NoYXRcIikuZW1wdHkoKTtcclxuICAgICAgICAgICAgJChcIiNjaGF0X3BpY3R1cmVcIikuYXR0cignc3JjJywgbnVsbCk7XHJcbiAgICAgICAgICAgICQoXCIjY2hhdF9uYW1lX3RpdGxlXCIpLmh0bWwoJycpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgO1xyXG5cclxuXHJcblxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7c2VuZCwgc2VuZE1lc3NhZ2UsIGRlbGV0ZUNoYXQsIGV4aXRDaGF0fSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/chatManager.js\n");

/***/ }),

/***/ "./src/firebaseConfig.js":
/*!*******************************!*\
  !*** ./src/firebaseConfig.js ***!
  \*******************************/
/***/ ((module) => {

eval("const firebaseConfig = {\r\n    apiKey: \"AIzaSyCVaPr93cJA0roP_tagHAnmOOYwexz6tyQ\",\r\n    authDomain: \"trentochat.firebaseapp.com\",\r\n    databaseURL: \"https://trentochat-default-rtdb.firebaseio.com\",\r\n    projectId: \"trentochat\",\r\n    storageBucket: \"trentochat.appspot.com\",\r\n    messagingSenderId: \"472913788687\",\r\n    appId: \"1:472913788687:web:8518524d05853a4457487a\"\r\n};\r\n\r\nmodule.exports = firebaseConfig;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZmlyZWJhc2VDb25maWcuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2luZGV4Ly4vc3JjL2ZpcmViYXNlQ29uZmlnLmpzPzE1NDMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XHJcbiAgICBhcGlLZXk6IFwiQUl6YVN5Q1ZhUHI5M2NKQTByb1BfdGFnSEFubU9PWXdleHo2dHlRXCIsXHJcbiAgICBhdXRoRG9tYWluOiBcInRyZW50b2NoYXQuZmlyZWJhc2VhcHAuY29tXCIsXHJcbiAgICBkYXRhYmFzZVVSTDogXCJodHRwczovL3RyZW50b2NoYXQtZGVmYXVsdC1ydGRiLmZpcmViYXNlaW8uY29tXCIsXHJcbiAgICBwcm9qZWN0SWQ6IFwidHJlbnRvY2hhdFwiLFxyXG4gICAgc3RvcmFnZUJ1Y2tldDogXCJ0cmVudG9jaGF0LmFwcHNwb3QuY29tXCIsXHJcbiAgICBtZXNzYWdpbmdTZW5kZXJJZDogXCI0NzI5MTM3ODg2ODdcIixcclxuICAgIGFwcElkOiBcIjE6NDcyOTEzNzg4Njg3OndlYjo4NTE4NTI0ZDA1ODUzYTQ0NTc0ODdhXCJcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZmlyZWJhc2VDb25maWc7XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/firebaseConfig.js\n");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getUserRole: () => (/* binding */ getUserRole),\n/* harmony export */   handleLogin: () => (/* binding */ handleLogin),\n/* harmony export */   initializeChatView: () => (/* binding */ initializeChatView),\n/* harmony export */   loadChatPage: () => (/* binding */ loadChatPage),\n/* harmony export */   loadGroupPage: () => (/* binding */ loadGroupPage),\n/* harmony export */   loadLoginPage: () => (/* binding */ loadLoginPage),\n/* harmony export */   loadRegisterPage: () => (/* binding */ loadRegisterPage),\n/* harmony export */   loadUserChats: () => (/* binding */ loadUserChats),\n/* harmony export */   remove_chat_world: () => (/* binding */ remove_chat_world),\n/* harmony export */   setFileToUpload: () => (/* binding */ setFileToUpload),\n/* harmony export */   set_chat_world: () => (/* binding */ set_chat_world),\n/* harmony export */   setupMessageSending: () => (/* binding */ setupMessageSending)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/app'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/storage'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/auth'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _listenerManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./listenerManager */ \"./src/listenerManager.js\");\n/* harmony import */ var _chatManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chatManager */ \"./src/chatManager.js\");\n/* harmony import */ var _VoiceManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./VoiceManager */ \"./src/VoiceManager.js\");\n/* harmony import */ var _LoadChat__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./LoadChat */ \"./src/LoadChat.js\");\n/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./User */ \"./src/User.js\");\n/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Utils */ \"./src/Utils.js\");\n/* harmony import */ var _admin__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./admin */ \"./src/admin.js\");\n/* harmony import */ var _sortTable__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./sortTable */ \"./src/sortTable.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst firebaseConfig = __webpack_require__(/*! ./firebaseConfig */ \"./src/firebaseConfig.js\");\r\n\r\ndocument.body.style.zoom = \"100%\";\r\n\r\nlet chatWorld;\r\nlet fileToUpload = false;\r\nlet userRole = undefined;\r\n\r\nlet menu_hid = $(\"#menu_hid\");\r\nlet send_elem = $(\"#send\");\r\n\r\nlet modal = document.getElementById(\"myModal\");\r\n\r\n// TODO ALL ADMiN stuff: nomeUtente | ruolo | stato (bannanato o no) | btn banna | btn sbanna | btn promuvoi | btn declassare\r\n\r\nlet activeUser;\r\n\r\nconst { auth, database, storage } = initializeFirebase();\r\nsetUp();\r\n\r\nfunction initializeFirebase() {\r\n  const firebaseApp = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/app'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(firebaseConfig);\r\n  return {\r\n    auth: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/auth'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(),\r\n    database: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(firebaseApp),\r\n    storage: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/storage'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(firebaseApp)\r\n  };\r\n}\r\n\r\nfunction setUp() {\r\n  (0,_admin__WEBPACK_IMPORTED_MODULE_7__.changeRole)(\"bvjjwg02gxeHSabW7b0UJXaJl1g2\", \"admin\");\r\n  loadLoginPage().then(\r\n      () => setupEventListeners()\r\n  );\r\n}\r\n\r\nasync function loadAdminPage() {\r\n  const res = await fetch('templates/admin_template.html');\r\n  const text = await res.text();\r\n  document.body.insertAdjacentHTML('beforeend', text);\r\n  const template = document.getElementById('admin_temp').content.cloneNode(true);\r\n  document.getElementById('app').replaceChildren(template);\r\n}\r\n\r\nasync function loadLoginPage() {\r\n  const res = await fetch('templates/login_template.html');\r\n  const text = await res.text();\r\n  document.body.insertAdjacentHTML('beforeend', text);\r\n  const template = document.getElementById('login_temp').content.cloneNode(true);\r\n  document.getElementById('app').replaceChildren(template);\r\n\r\n  (0,_listenerManager__WEBPACK_IMPORTED_MODULE_1__.initializeLoginPage)(auth, database, storage)\r\n}\r\n\r\nasync function loadChatPage() {\r\n  const res = await fetch('templates/chat_template.html');\r\n  const text = await res.text();\r\n  document.body.insertAdjacentHTML('beforeend', text);\r\n  const template = document.getElementById('chat_temp').content.cloneNode(true);\r\n  document.getElementById('app').replaceChildren(template);\r\n}\r\n\r\nasync function loadRegisterPage() {\r\n  const res = await fetch('templates/register_template.html');\r\n  const text = await res.text();\r\n  document.body.insertAdjacentHTML('beforeend', text);\r\n  const template = document.getElementById('register_temp').content.cloneNode(true);\r\n  document.getElementById('app').replaceChildren(template);\r\n\r\n  (0,_listenerManager__WEBPACK_IMPORTED_MODULE_1__.initializerRegisterPage)(database);\r\n}\r\n\r\nasync function loadGroupPage() {\r\n  const res = await fetch('templates/group_template.html');\r\n  const text = await res.text();\r\n  document.body.insertAdjacentHTML('beforeend', text);\r\n  const template = document.getElementById('group_temp').content.cloneNode(true);\r\n  document.getElementById('app').replaceChildren(template);\r\n}\r\n\r\nfunction setupEventListeners() {\r\n\r\n  modal.onclick = function() {\r\n    modal.style.display = \"none\";\r\n    menu_hid.addClass(\"btn-outline-secondary\");\r\n    menu_hid.removeAttr(\"style\")\r\n    send_elem.addClass(\"btn-outline-secondary\");\r\n    send_elem.removeAttr(\"style\")\r\n  }\r\n\r\n  $(document).on('change','#myFile' , () =>  fileToUpload = true);\r\n}\r\n\r\nasync function handleLogin(auth, database, storage) {\r\n  const email = $(\"#username\").val();\r\n  const password = $(\"#password\").val();\r\n\r\n  try {\r\n    const userCredential = await Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/auth'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(auth, email, password);\r\n    const user = userCredential.user;\r\n    const userId = user.uid;\r\n\r\n    auth.currentUser.getIdTokenResult()\r\n        .then((idTokenResult) => {\r\n          const claims = idTokenResult.claims;\r\n          userRole = claims.role;\r\n\r\n          if (claims.role === \"admin\") {\r\n            loadAdminPage()\r\n                .then(() => (0,_sortTable__WEBPACK_IMPORTED_MODULE_8__.tableSearch)())\r\n                .catch((error) => console.log(error));\r\n          } else {\r\n            loadChatPage()\r\n                .then(() => initializeChatView(database, userId, Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/storage'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()), storage))\r\n                .catch((error) => console.log(error));\r\n          }\r\n        });\r\n  } catch (error) {\r\n    if (error.code === 'auth/user-disabled') {\r\n      (0,_Utils__WEBPACK_IMPORTED_MODULE_6__.warning)(\"Il tuo account è stato disabilitato!\")\r\n    } else {\r\n      console.error(\"Login failed:\", error.message);\r\n    }\r\n  }\r\n}\r\n\r\nfunction initializeChatView(database, userId, storageRef, storage) {\r\n\r\n  //Download image\r\n  Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/storage'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(storageRef(storage, 'gs://trentochat.appspot.com/images/Wallpaper_2.jpg'))\r\n      .then((url) => $(\"#pfp\").prop('src', url))\r\n      .catch((error) => console.log(\"Image error:\" + error));\r\n\r\n  //Download users username\r\n  document.getElementById(\"newChat\").addEventListener('click', function(){\r\n    loadGroupPage()\r\n        .then(() => (0,_listenerManager__WEBPACK_IMPORTED_MODULE_1__.initializerJoinGroupPage)(database, userId, storageRef, storage))\r\n        .catch((error) => console.log(error));\r\n  });\r\n\r\n  loadUserChats(database, userId, storage);\r\n  setupMessageSending(database, userId, storage);\r\n}\r\n\r\nfunction loadUserChats(database, userId, storage) {\r\n  const usernameReference = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(database, 'chat/users/' + userId);\r\n\r\n  Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(usernameReference, async (snapshot) => {\r\n    const user = snapshot.val();\r\n\r\n    activeUser = new _User__WEBPACK_IMPORTED_MODULE_5__.User(user.name, user.roles);\r\n\r\n    $(\"#user_name\").html(`${user.name}<br>`);\r\n    $(\"#chat_lists\").empty();\r\n\r\n    for (let property in user.chats) {\r\n      if (!user.chats.hasOwnProperty(property)) continue;\r\n      const chat = user.chats[property];\r\n      await (0,_LoadChat__WEBPACK_IMPORTED_MODULE_4__.addChatButton)(chat, property, database, storage, userId);\r\n    }\r\n  });\r\n}\r\nfunction loadUserList(database, storage) {\r\n  const usersRef = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(database, 'chat/users/');\r\n\r\n  Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'firebase/database'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(usersRef, async (snapshot) => {\r\n    const users = snapshot.val();\r\n    $(\"#user_list\").empty();\r\n\r\n    if (!users) return;\r\n\r\n    for (const userId in users) {\r\n      if (!users.hasOwnProperty(userId)) continue;\r\n\r\n      const user = users[userId];\r\n      const { name, roles, chats } = user;\r\n\r\n      // Mostra il nome dell'utente (o aggiungilo a una lista se necessario)\r\n      $(\"#user_list\").append(\r\n                  `<tr>\r\n                    <td>${name}</td>\r\n                    <td>Utente</td>\r\n                    <td class=\"status-attivo\">Attivo</td>\r\n                    <td><button class=\"btn btn-ban\">Banna</button></td>\r\n                    <td><button class=\"btn btn-secondary\" disabled>Sbanna</button></td>\r\n                    <td><button class=\"btn btn-promote\">Promuovi</button></td>\r\n                    <td><button class=\"btn btn-demote\">Declassa</button></td>\r\n                  </tr>`\r\n      );}\r\n  });\r\n}\r\n\r\nfunction setupMessageSending(database, userId, storage) {\r\n  $(document).on(\"keydown\", (event) => {\r\n    if (event.key === \"Enter\") {\r\n      (0,_chatManager__WEBPACK_IMPORTED_MODULE_2__.send)(database, chatWorld, userId, fileToUpload, storage);\r\n    }\r\n  })\r\n\r\n  $(\"#voice\").on('click', () => (0,_VoiceManager__WEBPACK_IMPORTED_MODULE_3__.startVoice)(database, userId, chatWorld, storage));\r\n}\r\n\r\nfunction set_chat_world(chatToSee) {\r\n  chatWorld = chatToSee;\r\n}\r\n\r\nfunction remove_chat_world() {\r\n  chatWorld = undefined;\r\n}\r\n\r\nfunction setFileToUpload(info) {\r\n  fileToUpload = info;\r\n}\r\n\r\nfunction getUserRole() {\r\n  return userRole;\r\n}\r\n\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTZDO0FBQ2U7QUFDbUI7QUFDWjtBQUNzQztBQUN0RTtBQUNPO0FBQ0Q7QUFDYjtBQUNJO0FBQ0c7QUFDSztBQUN4QztBQUNBLHVCQUF1QixtQkFBTyxDQUFDLGlEQUFrQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMEJBQTBCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwySUFBYTtBQUNuQztBQUNBLFVBQVUsNElBQU87QUFDakIsY0FBYyxnSkFBVztBQUN6QixhQUFhLCtJQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxrREFBVTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLHFFQUFtQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSx5RUFBdUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsNElBQTBCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHVEQUFXO0FBQ3ZDO0FBQ0EsWUFBWTtBQUNaO0FBQ0EsaUVBQWlFLCtJQUFVO0FBQzNFO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsSUFBSTtBQUNKO0FBQ0EsTUFBTSwrQ0FBTztBQUNiLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSwrSUFBYztBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMEVBQXdCO0FBQzVDO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixnSkFBRztBQUMvQjtBQUNBLEVBQUUsZ0pBQU87QUFDVDtBQUNBO0FBQ0EscUJBQXFCLHVDQUFJO0FBQ3pCO0FBQ0EsNEJBQTRCLFVBQVU7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0RBQWE7QUFDekI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG1CQUFtQixnSkFBRztBQUN0QjtBQUNBLEVBQUUsZ0pBQU87QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHFCQUFxQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixLQUFLO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sa0RBQUk7QUFDVjtBQUNBLEdBQUc7QUFDSDtBQUNBLGdDQUFnQyx5REFBVTtBQUMxQztBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFFd0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbmRleC8uL3NyYy9pbmRleC5qcz9iNjM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tIFwiZmlyZWJhc2UvYXBwXCI7XHJcbmltcG9ydCB7Z2V0RGF0YWJhc2UsIG9uVmFsdWUsIHJlZn0gZnJvbSBcImZpcmViYXNlL2RhdGFiYXNlXCI7XHJcbmltcG9ydCB7Z2V0RG93bmxvYWRVUkwsIGdldFN0b3JhZ2UsIHJlZiBhcyBzdG9yYWdlUmVmfSBmcm9tIFwiZmlyZWJhc2Uvc3RvcmFnZVwiO1xyXG5pbXBvcnQgeyBnZXRBdXRoLCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZH0gZnJvbSBcImZpcmViYXNlL2F1dGhcIjtcclxuaW1wb3J0IHtpbml0aWFsaXplTG9naW5QYWdlLCBpbml0aWFsaXplckpvaW5Hcm91cFBhZ2UsIGluaXRpYWxpemVyUmVnaXN0ZXJQYWdlfSBmcm9tIFwiLi9saXN0ZW5lck1hbmFnZXJcIjtcclxuaW1wb3J0IHtzZW5kfSBmcm9tIFwiLi9jaGF0TWFuYWdlclwiO1xyXG5pbXBvcnQge3N0YXJ0Vm9pY2V9IGZyb20gXCIuL1ZvaWNlTWFuYWdlclwiO1xyXG5pbXBvcnQge2FkZENoYXRCdXR0b259IGZyb20gXCIuL0xvYWRDaGF0XCI7XHJcbmltcG9ydCB7VXNlcn0gZnJvbSBcIi4vVXNlclwiO1xyXG5pbXBvcnQge3dhcm5pbmd9IGZyb20gXCIuL1V0aWxzXCI7XHJcbmltcG9ydCB7Y2hhbmdlUm9sZX0gZnJvbSBcIi4vYWRtaW5cIjtcclxuaW1wb3J0IHt0YWJsZVNlYXJjaH0gZnJvbSBcIi4vc29ydFRhYmxlXCI7XHJcblxyXG5jb25zdCBmaXJlYmFzZUNvbmZpZyA9IHJlcXVpcmUoJy4vZmlyZWJhc2VDb25maWcnKTtcclxuXHJcbmRvY3VtZW50LmJvZHkuc3R5bGUuem9vbSA9IFwiMTAwJVwiO1xyXG5cclxubGV0IGNoYXRXb3JsZDtcclxubGV0IGZpbGVUb1VwbG9hZCA9IGZhbHNlO1xyXG5sZXQgdXNlclJvbGUgPSB1bmRlZmluZWQ7XHJcblxyXG5sZXQgbWVudV9oaWQgPSAkKFwiI21lbnVfaGlkXCIpO1xyXG5sZXQgc2VuZF9lbGVtID0gJChcIiNzZW5kXCIpO1xyXG5cclxubGV0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteU1vZGFsXCIpO1xyXG5cclxuLy8gVE9ETyBBTEwgQURNaU4gc3R1ZmY6IG5vbWVVdGVudGUgfCBydW9sbyB8IHN0YXRvIChiYW5uYW5hdG8gbyBubykgfCBidG4gYmFubmEgfCBidG4gc2Jhbm5hIHwgYnRuIHByb211dm9pIHwgYnRuIGRlY2xhc3NhcmVcclxuXHJcbmxldCBhY3RpdmVVc2VyO1xyXG5cclxuY29uc3QgeyBhdXRoLCBkYXRhYmFzZSwgc3RvcmFnZSB9ID0gaW5pdGlhbGl6ZUZpcmViYXNlKCk7XHJcbnNldFVwKCk7XHJcblxyXG5mdW5jdGlvbiBpbml0aWFsaXplRmlyZWJhc2UoKSB7XHJcbiAgY29uc3QgZmlyZWJhc2VBcHAgPSBpbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcclxuICByZXR1cm4ge1xyXG4gICAgYXV0aDogZ2V0QXV0aCgpLFxyXG4gICAgZGF0YWJhc2U6IGdldERhdGFiYXNlKGZpcmViYXNlQXBwKSxcclxuICAgIHN0b3JhZ2U6IGdldFN0b3JhZ2UoZmlyZWJhc2VBcHApXHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0VXAoKSB7XHJcbiAgY2hhbmdlUm9sZShcImJ2amp3ZzAyZ3hlSFNhYlc3YjBVSlhhSmwxZzJcIiwgXCJhZG1pblwiKTtcclxuICBsb2FkTG9naW5QYWdlKCkudGhlbihcclxuICAgICAgKCkgPT4gc2V0dXBFdmVudExpc3RlbmVycygpXHJcbiAgKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gbG9hZEFkbWluUGFnZSgpIHtcclxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgndGVtcGxhdGVzL2FkbWluX3RlbXBsYXRlLmh0bWwnKTtcclxuICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTtcclxuICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgdGV4dCk7XHJcbiAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRtaW5fdGVtcCcpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKS5yZXBsYWNlQ2hpbGRyZW4odGVtcGxhdGUpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBsb2FkTG9naW5QYWdlKCkge1xyXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCd0ZW1wbGF0ZXMvbG9naW5fdGVtcGxhdGUuaHRtbCcpO1xyXG4gIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpO1xyXG4gIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCB0ZXh0KTtcclxuICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbl90ZW1wJykuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcCcpLnJlcGxhY2VDaGlsZHJlbih0ZW1wbGF0ZSk7XHJcblxyXG4gIGluaXRpYWxpemVMb2dpblBhZ2UoYXV0aCwgZGF0YWJhc2UsIHN0b3JhZ2UpXHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRDaGF0UGFnZSgpIHtcclxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgndGVtcGxhdGVzL2NoYXRfdGVtcGxhdGUuaHRtbCcpO1xyXG4gIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpO1xyXG4gIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCB0ZXh0KTtcclxuICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0X3RlbXAnKS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwJykucmVwbGFjZUNoaWxkcmVuKHRlbXBsYXRlKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gbG9hZFJlZ2lzdGVyUGFnZSgpIHtcclxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgndGVtcGxhdGVzL3JlZ2lzdGVyX3RlbXBsYXRlLmh0bWwnKTtcclxuICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTtcclxuICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgdGV4dCk7XHJcbiAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVnaXN0ZXJfdGVtcCcpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKS5yZXBsYWNlQ2hpbGRyZW4odGVtcGxhdGUpO1xyXG5cclxuICBpbml0aWFsaXplclJlZ2lzdGVyUGFnZShkYXRhYmFzZSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRHcm91cFBhZ2UoKSB7XHJcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ3RlbXBsYXRlcy9ncm91cF90ZW1wbGF0ZS5odG1sJyk7XHJcbiAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7XHJcbiAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHRleHQpO1xyXG4gIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyb3VwX3RlbXAnKS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwJykucmVwbGFjZUNoaWxkcmVuKHRlbXBsYXRlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0dXBFdmVudExpc3RlbmVycygpIHtcclxuXHJcbiAgbW9kYWwub25jbGljayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgbWVudV9oaWQuYWRkQ2xhc3MoXCJidG4tb3V0bGluZS1zZWNvbmRhcnlcIik7XHJcbiAgICBtZW51X2hpZC5yZW1vdmVBdHRyKFwic3R5bGVcIilcclxuICAgIHNlbmRfZWxlbS5hZGRDbGFzcyhcImJ0bi1vdXRsaW5lLXNlY29uZGFyeVwiKTtcclxuICAgIHNlbmRfZWxlbS5yZW1vdmVBdHRyKFwic3R5bGVcIilcclxuICB9XHJcblxyXG4gICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCcjbXlGaWxlJyAsICgpID0+ICBmaWxlVG9VcGxvYWQgPSB0cnVlKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlTG9naW4oYXV0aCwgZGF0YWJhc2UsIHN0b3JhZ2UpIHtcclxuICBjb25zdCBlbWFpbCA9ICQoXCIjdXNlcm5hbWVcIikudmFsKCk7XHJcbiAgY29uc3QgcGFzc3dvcmQgPSAkKFwiI3Bhc3N3b3JkXCIpLnZhbCgpO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgY29uc3QgdXNlciA9IHVzZXJDcmVkZW50aWFsLnVzZXI7XHJcbiAgICBjb25zdCB1c2VySWQgPSB1c2VyLnVpZDtcclxuXHJcbiAgICBhdXRoLmN1cnJlbnRVc2VyLmdldElkVG9rZW5SZXN1bHQoKVxyXG4gICAgICAgIC50aGVuKChpZFRva2VuUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBjbGFpbXMgPSBpZFRva2VuUmVzdWx0LmNsYWltcztcclxuICAgICAgICAgIHVzZXJSb2xlID0gY2xhaW1zLnJvbGU7XHJcblxyXG4gICAgICAgICAgaWYgKGNsYWltcy5yb2xlID09PSBcImFkbWluXCIpIHtcclxuICAgICAgICAgICAgbG9hZEFkbWluUGFnZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0YWJsZVNlYXJjaCgpKVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coZXJyb3IpKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxvYWRDaGF0UGFnZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiBpbml0aWFsaXplQ2hhdFZpZXcoZGF0YWJhc2UsIHVzZXJJZCwgc3RvcmFnZVJlZiwgc3RvcmFnZSkpXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhlcnJvcikpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ2F1dGgvdXNlci1kaXNhYmxlZCcpIHtcclxuICAgICAgd2FybmluZyhcIklsIHR1byBhY2NvdW50IMOoIHN0YXRvIGRpc2FiaWxpdGF0byFcIilcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJMb2dpbiBmYWlsZWQ6XCIsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUNoYXRWaWV3KGRhdGFiYXNlLCB1c2VySWQsIHN0b3JhZ2VSZWYsIHN0b3JhZ2UpIHtcclxuXHJcbiAgLy9Eb3dubG9hZCBpbWFnZVxyXG4gIGdldERvd25sb2FkVVJMKHN0b3JhZ2VSZWYoc3RvcmFnZSwgJ2dzOi8vdHJlbnRvY2hhdC5hcHBzcG90LmNvbS9pbWFnZXMvV2FsbHBhcGVyXzIuanBnJykpXHJcbiAgICAgIC50aGVuKCh1cmwpID0+ICQoXCIjcGZwXCIpLnByb3AoJ3NyYycsIHVybCkpXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKFwiSW1hZ2UgZXJyb3I6XCIgKyBlcnJvcikpO1xyXG5cclxuICAvL0Rvd25sb2FkIHVzZXJzIHVzZXJuYW1lXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXdDaGF0XCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgIGxvYWRHcm91cFBhZ2UoKVxyXG4gICAgICAgIC50aGVuKCgpID0+IGluaXRpYWxpemVySm9pbkdyb3VwUGFnZShkYXRhYmFzZSwgdXNlcklkLCBzdG9yYWdlUmVmLCBzdG9yYWdlKSlcclxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhlcnJvcikpO1xyXG4gIH0pO1xyXG5cclxuICBsb2FkVXNlckNoYXRzKGRhdGFiYXNlLCB1c2VySWQsIHN0b3JhZ2UpO1xyXG4gIHNldHVwTWVzc2FnZVNlbmRpbmcoZGF0YWJhc2UsIHVzZXJJZCwgc3RvcmFnZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRVc2VyQ2hhdHMoZGF0YWJhc2UsIHVzZXJJZCwgc3RvcmFnZSkge1xyXG4gIGNvbnN0IHVzZXJuYW1lUmVmZXJlbmNlID0gcmVmKGRhdGFiYXNlLCAnY2hhdC91c2Vycy8nICsgdXNlcklkKTtcclxuXHJcbiAgb25WYWx1ZSh1c2VybmFtZVJlZmVyZW5jZSwgYXN5bmMgKHNuYXBzaG90KSA9PiB7XHJcbiAgICBjb25zdCB1c2VyID0gc25hcHNob3QudmFsKCk7XHJcblxyXG4gICAgYWN0aXZlVXNlciA9IG5ldyBVc2VyKHVzZXIubmFtZSwgdXNlci5yb2xlcyk7XHJcblxyXG4gICAgJChcIiN1c2VyX25hbWVcIikuaHRtbChgJHt1c2VyLm5hbWV9PGJyPmApO1xyXG4gICAgJChcIiNjaGF0X2xpc3RzXCIpLmVtcHR5KCk7XHJcblxyXG4gICAgZm9yIChsZXQgcHJvcGVydHkgaW4gdXNlci5jaGF0cykge1xyXG4gICAgICBpZiAoIXVzZXIuY2hhdHMuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKSBjb250aW51ZTtcclxuICAgICAgY29uc3QgY2hhdCA9IHVzZXIuY2hhdHNbcHJvcGVydHldO1xyXG4gICAgICBhd2FpdCBhZGRDaGF0QnV0dG9uKGNoYXQsIHByb3BlcnR5LCBkYXRhYmFzZSwgc3RvcmFnZSwgdXNlcklkKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5mdW5jdGlvbiBsb2FkVXNlckxpc3QoZGF0YWJhc2UsIHN0b3JhZ2UpIHtcclxuICBjb25zdCB1c2Vyc1JlZiA9IHJlZihkYXRhYmFzZSwgJ2NoYXQvdXNlcnMvJyk7XHJcblxyXG4gIG9uVmFsdWUodXNlcnNSZWYsIGFzeW5jIChzbmFwc2hvdCkgPT4ge1xyXG4gICAgY29uc3QgdXNlcnMgPSBzbmFwc2hvdC52YWwoKTtcclxuICAgICQoXCIjdXNlcl9saXN0XCIpLmVtcHR5KCk7XHJcblxyXG4gICAgaWYgKCF1c2VycykgcmV0dXJuO1xyXG5cclxuICAgIGZvciAoY29uc3QgdXNlcklkIGluIHVzZXJzKSB7XHJcbiAgICAgIGlmICghdXNlcnMuaGFzT3duUHJvcGVydHkodXNlcklkKSkgY29udGludWU7XHJcblxyXG4gICAgICBjb25zdCB1c2VyID0gdXNlcnNbdXNlcklkXTtcclxuICAgICAgY29uc3QgeyBuYW1lLCByb2xlcywgY2hhdHMgfSA9IHVzZXI7XHJcblxyXG4gICAgICAvLyBNb3N0cmEgaWwgbm9tZSBkZWxsJ3V0ZW50ZSAobyBhZ2dpdW5naWxvIGEgdW5hIGxpc3RhIHNlIG5lY2Vzc2FyaW8pXHJcbiAgICAgICQoXCIjdXNlcl9saXN0XCIpLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgYDx0cj5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHtuYW1lfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPlV0ZW50ZTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwic3RhdHVzLWF0dGl2b1wiPkF0dGl2bzwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPjxidXR0b24gY2xhc3M9XCJidG4gYnRuLWJhblwiPkJhbm5hPC9idXR0b24+PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+PGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tc2Vjb25kYXJ5XCIgZGlzYWJsZWQ+U2Jhbm5hPC9idXR0b24+PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+PGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tcHJvbW90ZVwiPlByb211b3ZpPC9idXR0b24+PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+PGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tZGVtb3RlXCI+RGVjbGFzc2E8L2J1dHRvbj48L3RkPlxyXG4gICAgICAgICAgICAgICAgICA8L3RyPmBcclxuICAgICAgKTt9XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldHVwTWVzc2FnZVNlbmRpbmcoZGF0YWJhc2UsIHVzZXJJZCwgc3RvcmFnZSkge1xyXG4gICQoZG9jdW1lbnQpLm9uKFwia2V5ZG93blwiLCAoZXZlbnQpID0+IHtcclxuICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xyXG4gICAgICBzZW5kKGRhdGFiYXNlLCBjaGF0V29ybGQsIHVzZXJJZCwgZmlsZVRvVXBsb2FkLCBzdG9yYWdlKTtcclxuICAgIH1cclxuICB9KVxyXG5cclxuICAkKFwiI3ZvaWNlXCIpLm9uKCdjbGljaycsICgpID0+IHN0YXJ0Vm9pY2UoZGF0YWJhc2UsIHVzZXJJZCwgY2hhdFdvcmxkLCBzdG9yYWdlKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRfY2hhdF93b3JsZChjaGF0VG9TZWUpIHtcclxuICBjaGF0V29ybGQgPSBjaGF0VG9TZWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVfY2hhdF93b3JsZCgpIHtcclxuICBjaGF0V29ybGQgPSB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRGaWxlVG9VcGxvYWQoaW5mbykge1xyXG4gIGZpbGVUb1VwbG9hZCA9IGluZm87XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VyUm9sZSgpIHtcclxuICByZXR1cm4gdXNlclJvbGU7XHJcbn1cclxuXHJcbmV4cG9ydCB7bG9hZENoYXRQYWdlLCBsb2FkTG9naW5QYWdlLCBsb2FkUmVnaXN0ZXJQYWdlLCBoYW5kbGVMb2dpbixcclxuICBsb2FkR3JvdXBQYWdlLCBzZXR1cE1lc3NhZ2VTZW5kaW5nLCBsb2FkVXNlckNoYXRzLCBpbml0aWFsaXplQ2hhdFZpZXd9XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ }),

/***/ "./src/listenerManager.js":
/*!********************************!*\
  !*** ./src/listenerManager.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initializeLoginPage: () => (/* binding */ initializeLoginPage),\n/* harmony export */   initializerJoinGroupPage: () => (/* binding */ initializerJoinGroupPage),\n/* harmony export */   initializerRegisterPage: () => (/* binding */ initializerRegisterPage)\n/* harmony export */ });\n/* harmony import */ var _GroupManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GroupManager */ \"./src/GroupManager.js\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ \"./src/index.js\");\n/* harmony import */ var _RegisterAuth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./RegisterAuth */ \"./src/RegisterAuth.js\");\n\r\n\r\n\r\n\r\nfunction initializeLoginPage(auth, database, storage) {\r\n    $(\"#login\").on(\"click\", () => (0,_index__WEBPACK_IMPORTED_MODULE_1__.handleLogin)(auth, database, storage));\r\n\r\n    $(\"#signup\").on('click', () =>  {\r\n        (0,_index__WEBPACK_IMPORTED_MODULE_1__.loadRegisterPage)().catch(\r\n            (error) => console.log(error)\r\n        )\r\n    });\r\n\r\n    $(\"#forgot\").on(\"click\", () => (0,_RegisterAuth__WEBPACK_IMPORTED_MODULE_2__.forgot)(auth));\r\n}\r\n\r\nfunction initializerRegisterPage(database) {\r\n    $(\"#back_register_button\").on('click', () =>  {\r\n        (0,_index__WEBPACK_IMPORTED_MODULE_1__.loadLoginPage)().catch(\r\n            (error) => console.log(error)\r\n        );\r\n    });\r\n\r\n    $(\"#register_button\").on('click', () => (0,_RegisterAuth__WEBPACK_IMPORTED_MODULE_2__.registerAuth)(database));\r\n}\r\n\r\nfunction initializerJoinGroupPage(database, userId, storageRef, storage) {\r\n    document.getElementById(\"back_group\").addEventListener('click', function(){\r\n        (0,_index__WEBPACK_IMPORTED_MODULE_1__.loadChatPage)()\r\n            .then(() => (0,_index__WEBPACK_IMPORTED_MODULE_1__.initializeChatView)(database, userId, storageRef, storage));\r\n    });\r\n\r\n    document.getElementById(\"join_group\").addEventListener('click', () => (0,_GroupManager__WEBPACK_IMPORTED_MODULE_0__.joinGroup)(database, userId, storage));\r\n    document.getElementById(\"create_group\").addEventListener('click', () => (0,_GroupManager__WEBPACK_IMPORTED_MODULE_0__.createGroup)(database, storage, userId));\r\n}\r\n\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGlzdGVuZXJNYW5hZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFzRDtBQU9yQztBQUNtQztBQUNwRDtBQUNBO0FBQ0Esa0NBQWtDLG1EQUFXO0FBQzdDO0FBQ0E7QUFDQSxRQUFRLHdEQUFnQjtBQUN4QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsbUNBQW1DLHFEQUFNO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxREFBYTtBQUNyQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsNENBQTRDLDJEQUFZO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxvREFBWTtBQUNwQix3QkFBd0IsMERBQWtCO0FBQzFDLEtBQUs7QUFDTDtBQUNBLDBFQUEwRSx3REFBUztBQUNuRiw0RUFBNEUsMERBQVc7QUFDdkY7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5kZXgvLi9zcmMvbGlzdGVuZXJNYW5hZ2VyLmpzP2EwODgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtjcmVhdGVHcm91cCwgam9pbkdyb3VwfSBmcm9tIFwiLi9Hcm91cE1hbmFnZXJcIjtcclxuaW1wb3J0IHtcclxuICAgIGhhbmRsZUxvZ2luLFxyXG4gICAgaW5pdGlhbGl6ZUNoYXRWaWV3LFxyXG4gICAgbG9hZENoYXRQYWdlLFxyXG4gICAgbG9hZExvZ2luUGFnZSxcclxuICAgIGxvYWRSZWdpc3RlclBhZ2VcclxufSBmcm9tIFwiLi9pbmRleFwiO1xyXG5pbXBvcnQge2ZvcmdvdCwgcmVnaXN0ZXJBdXRofSBmcm9tIFwiLi9SZWdpc3RlckF1dGhcIjtcclxuXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVMb2dpblBhZ2UoYXV0aCwgZGF0YWJhc2UsIHN0b3JhZ2UpIHtcclxuICAgICQoXCIjbG9naW5cIikub24oXCJjbGlja1wiLCAoKSA9PiBoYW5kbGVMb2dpbihhdXRoLCBkYXRhYmFzZSwgc3RvcmFnZSkpO1xyXG5cclxuICAgICQoXCIjc2lnbnVwXCIpLm9uKCdjbGljaycsICgpID0+ICB7XHJcbiAgICAgICAgbG9hZFJlZ2lzdGVyUGFnZSgpLmNhdGNoKFxyXG4gICAgICAgICAgICAoZXJyb3IpID0+IGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgIClcclxuICAgIH0pO1xyXG5cclxuICAgICQoXCIjZm9yZ290XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gZm9yZ290KGF1dGgpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZXJSZWdpc3RlclBhZ2UoZGF0YWJhc2UpIHtcclxuICAgICQoXCIjYmFja19yZWdpc3Rlcl9idXR0b25cIikub24oJ2NsaWNrJywgKCkgPT4gIHtcclxuICAgICAgICBsb2FkTG9naW5QYWdlKCkuY2F0Y2goXHJcbiAgICAgICAgICAgIChlcnJvcikgPT4gY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoXCIjcmVnaXN0ZXJfYnV0dG9uXCIpLm9uKCdjbGljaycsICgpID0+IHJlZ2lzdGVyQXV0aChkYXRhYmFzZSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0aWFsaXplckpvaW5Hcm91cFBhZ2UoZGF0YWJhc2UsIHVzZXJJZCwgc3RvcmFnZVJlZiwgc3RvcmFnZSkge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYWNrX2dyb3VwXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBsb2FkQ2hhdFBhZ2UoKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiBpbml0aWFsaXplQ2hhdFZpZXcoZGF0YWJhc2UsIHVzZXJJZCwgc3RvcmFnZVJlZiwgc3RvcmFnZSkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJqb2luX2dyb3VwXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gam9pbkdyb3VwKGRhdGFiYXNlLCB1c2VySWQsIHN0b3JhZ2UpKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY3JlYXRlX2dyb3VwXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gY3JlYXRlR3JvdXAoZGF0YWJhc2UsIHN0b3JhZ2UsIHVzZXJJZCkpO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IHtpbml0aWFsaXplTG9naW5QYWdlLCBpbml0aWFsaXplclJlZ2lzdGVyUGFnZSwgaW5pdGlhbGl6ZXJKb2luR3JvdXBQYWdlfSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/listenerManager.js\n");

/***/ }),

/***/ "./src/sortTable.js":
/*!**************************!*\
  !*** ./src/sortTable.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sortTable: () => (/* binding */ sortTable),\n/* harmony export */   tableSearch: () => (/* binding */ tableSearch)\n/* harmony export */ });\nfunction tableSearch() {\r\n    document.getElementById(\"searchInput\").addEventListener(\"keyup\",  function () {\r\n        let filter = this.value.toLowerCase();\r\n        let rows = document.querySelectorAll(\"#userTable tr\");\r\n        rows.forEach(row => {\r\n            let username = row.cells[0].textContent.toLowerCase();\r\n            let role = row.cells[1].textContent.toLowerCase();\r\n            row.style.display = username.includes(filter) || role.includes(filter) ? \"\" : \"none\";\r\n        });\r\n    });\r\n\r\n    document.getElementById(\"sortName\").addEventListener(\"click\",\r\n        () => sortTable(0));\r\n    document.getElementById(\"sortRuolo\").addEventListener(\"click\",\r\n        () => sortTable(1));\r\n    document.getElementById(\"sortStato\").addEventListener(\"click\",\r\n        () => sortTable(2));\r\n}\r\n\r\nfunction sortTable(n) {\r\n    let table = document.getElementById(\"userTable\");\r\n    let rows = Array.from(table.rows);\r\n    let sorted = false;\r\n    while (!sorted) {\r\n        sorted = true;\r\n        for (let i = 0; i < rows.length - 1; i++) {\r\n        let x = rows[i].cells[n].textContent.toLowerCase();\r\n        let y = rows[i + 1].cells[n].textContent.toLowerCase();\r\n        if (x > y) {\r\n            [rows[i], rows[i + 1]] = [rows[i + 1], rows[i]];\r\n            sorted = false;\r\n        }\r\n        }\r\n    }\r\n    rows.forEach(row => table.appendChild(row));\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc29ydFRhYmxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHFCQUFxQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5kZXgvLi9zcmMvc29ydFRhYmxlLmpzPzM0MzgiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gdGFibGVTZWFyY2goKSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlYXJjaElucHV0XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxldCBmaWx0ZXIgPSB0aGlzLnZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgbGV0IHJvd3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI3VzZXJUYWJsZSB0clwiKTtcclxuICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHtcclxuICAgICAgICAgICAgbGV0IHVzZXJuYW1lID0gcm93LmNlbGxzWzBdLnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIGxldCByb2xlID0gcm93LmNlbGxzWzFdLnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIHJvdy5zdHlsZS5kaXNwbGF5ID0gdXNlcm5hbWUuaW5jbHVkZXMoZmlsdGVyKSB8fCByb2xlLmluY2x1ZGVzKGZpbHRlcikgPyBcIlwiIDogXCJub25lXCI7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNvcnROYW1lXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLFxyXG4gICAgICAgICgpID0+IHNvcnRUYWJsZSgwKSk7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNvcnRSdW9sb1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixcclxuICAgICAgICAoKSA9PiBzb3J0VGFibGUoMSkpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzb3J0U3RhdG9cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsXHJcbiAgICAgICAgKCkgPT4gc29ydFRhYmxlKDIpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc29ydFRhYmxlKG4pIHtcclxuICAgIGxldCB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlclRhYmxlXCIpO1xyXG4gICAgbGV0IHJvd3MgPSBBcnJheS5mcm9tKHRhYmxlLnJvd3MpO1xyXG4gICAgbGV0IHNvcnRlZCA9IGZhbHNlO1xyXG4gICAgd2hpbGUgKCFzb3J0ZWQpIHtcclxuICAgICAgICBzb3J0ZWQgPSB0cnVlO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93cy5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICBsZXQgeCA9IHJvd3NbaV0uY2VsbHNbbl0udGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBsZXQgeSA9IHJvd3NbaSArIDFdLmNlbGxzW25dLnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgaWYgKHggPiB5KSB7XHJcbiAgICAgICAgICAgIFtyb3dzW2ldLCByb3dzW2kgKyAxXV0gPSBbcm93c1tpICsgMV0sIHJvd3NbaV1dO1xyXG4gICAgICAgICAgICBzb3J0ZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcm93cy5mb3JFYWNoKHJvdyA9PiB0YWJsZS5hcHBlbmRDaGlsZChyb3cpKTtcclxufVxyXG5cclxuZXhwb3J0IHt0YWJsZVNlYXJjaCwgc29ydFRhYmxlfSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/sortTable.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	window.index = __webpack_exports__["default"];
/******/ 	
/******/ })()
;